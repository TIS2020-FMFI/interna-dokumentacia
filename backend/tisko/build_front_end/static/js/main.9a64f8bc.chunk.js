(this.webpackJsonpgefco=this.webpackJsonpgefco||[]).push([[0],{195:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n(21),o=n.n(c),i=n(7),s=n(73),l=n(6),d=n(28),u=n(14),j=n(114),b=n(12),m=n(58),f=n.n(m),O="http://5.178.48.91:8080/documentation/",h=["branches","cities","departments","divisions"],p=["branch","city","department","division"],x=["TPK","OS","PP","PL"],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{dataField:""+e,text:t,sort:!0,headerStyle:{width:"1%"}}},v=function(e){return Object.keys(e).includes("link")?"document":"training"},y=function(e){return!0===e.require_superior},S=function(e){return e.map((function(e){if(!y(e))return e.id}))},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return[{dataField:e,order:t}]},E=function(){return JSON.parse(sessionStorage.getItem("user"))},k=function(){return sessionStorage.removeItem("user")},F=function(){return null!==E()&&"admin"===E().role},T=function(e){return{variant:"success",body:e}},C=function(e){return{variant:"danger",body:e}},D=function(e){return 200<=e.status&&e.status<=299},N=function(e){return e?e.id:0},_=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("option",{hidden:!0,value:"",children:"Select option ..."}),e.map((function(e){return Object(a.jsx)("option",{value:e,children:e},f()())}))]})},R=function(e){return e.map((function(e){var t={};return p.forEach((function(n){t[n]={value:e["".concat(n,"_id")],label:e["".concat(n,"_name")]}})),t}))},P=function(e){return{branches:e.branches.map((function(e){return{value:e.id,label:e.name}})),divisions:e.divisions.map((function(e){return{value:e.id,label:e.name}})),departments:e.departments.map((function(e){return{value:e.id,label:e.name}})),cities:e.cities.map((function(e){return{value:e.id,label:e.name}}))}};function L(e,t){if(e.cancel)return"-";var n=e.e_date.Valid?"":"e";return t&&!e.s_date.Valid&&(n+="s"),n}var z=function(e,t,n){return e?e.assigned_to.split("&").map((function(e){var a=e.split("#"),r=Object(i.a)(a,3),c=r[0],o=r[1],s=(r[2],c.split("; ")),l={id:f()()};if(h.forEach((function(e,n){(l[e]=[],"x"!==s[n])&&s[n].split(",").forEach((function(n){l[e].push({value:n,label:I(e,n,t)})}))})),l.removedEmployees=[],!o)return l;var d=o.split(",");return console.log(d),d.forEach((function(e){l.removedEmployees.push({value:e,label:M(e,n,t.departments)})})),console.log(l),l})):[]},I=function(e,t,n){var a;return null===(a=n[e].find((function(e){return e.id==t})))||void 0===a?void 0:a.name},M=function(e,t,n){if(!t)return"unknown";var a=t.find((function(t){return t.id.toString()===e}));return a?U(a,n):"unknown"},B=function(e){return{Time:e+"T00:00:00Z",Valid:!0}},A=function(e){return e.Time.substr(0,10)},q=function(e){var t=e.map((function(e){var t=h.map((function(t){var n=e[t];return console.log("values",n),n.length?n.map((function(e){return e.value})).join(","):"x"})).join("; "),n=e.removedEmployees.map((function(e){return e.value})).join(",");return"".concat(t,"#").concat(n,"#")}));return console.log(t),t.join("&")},H=function(e){return e.sort((function(e,t){return e.last_name<t.last_name?-1:e.last_name>t.last_name?1:0}))},U=function(e,t){var n,a=e.id,r=e.first_name,c=e.last_name,o=e.department_id,i=null===(n=t.find((function(e){return e.id===o})))||void 0===n?void 0:n.name;return"".concat(r," ").concat(c," [").concat(a,", ").concat(i,"]")},G=function(e,t){if(!e.length)return[];function n(e,t){var n=e.map((function(e){return e[t].map((function(e){return e.label}))}));return Object(b.a)(new Set(n.flat())).join(", ")}return e.map((function(e){var a=z(e,t);return Object(l.a)(Object(l.a)({},e),{},{branches:n(a,"branches"),cities:n(a,"cities"),divisions:n(a,"divisions"),departments:n(a,"departments")})}))},J=function(e){return fetch(O+e,{method:"GET"}).then((function(e){return e.json()}))},V=function(e){return window.location.replace(e)},X=n(111),W=n.n(X),K=function(e){var t=e.title,n=e.data,r=e.columns,c=e.order,o=e.expandRow,i=e.classes,s=Object(d.a)(e,["title","data","columns","order","expandRow","classes"]),u=function(){return t?Object(a.jsx)("h3",{style:{borderRadius:"0.25em",textAlign:"center",border:"2px solid gray",margin:"2% 0",padding:"0.5em",marginTop:"1.5%"},children:t}):null};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u,{}),Object(a.jsx)(W.a,Object(l.a)({keyField:"id",hover:!0,classes:i,data:n,columns:r,noDataIndication:function(){return Object(a.jsx)("p",{children:"Table is empty"})},defaultSorted:c,expandRow:o},s))]})},Z=n(203),Y=function(e,t){var n=t.employee;if(n)return Object(a.jsxs)(a.Fragment,{children:[n.first_name," ",n.last_name]})},Q=function(e){var t=e.Time;return e.Valid?t.substr(0,10).split("-").reverse().join("."):"-"},$=function(e,t){return Object(a.jsx)(a.Fragment,{children:Q(t.date)})},ee=function(e,t){return Object(a.jsx)(a.Fragment,{children:Q(t.deadline)})},te=function(e,t){return Object(a.jsx)(a.Fragment,{children:Q(t.release_date)})},ne=function(e,t){return Object(a.jsx)(a.Fragment,{children:Q(t.s_date)})},ae=function(e,t){return Object(a.jsx)(a.Fragment,{children:Q(t.signatures[0].date)})},re=function(e,t){return Object(a.jsx)(a.Fragment,{children:Q(t.e_date)})},ce=function(e,t){return Math.round(100*t.complete)/100+"%"},oe=function(e,t){return Object(a.jsx)("a",{href:t.name,target:"_blank",rel:"noreferrer",children:t.name})},ie=function(e,t){var n=function(){return Object(a.jsxs)("h5",{children:[Object(a.jsx)(Z.a,{style:{color:"red",marginBottom:"6px"}})," ",oe(0,t)]})},r=t.deadline<Date.now()&&t.employees.find((function(e){return e.state.includes("e")||e.state.includes("s")}));return Object(a.jsx)(a.Fragment,{children:r?Object(a.jsx)(n,{}):oe(0,t)})},se=n(36),le=function(e,t,n,r){var c=r.setModalInfo,o=r.setShowModal,i=r.asSuperior;return Object(a.jsx)(se.a,{onClick:function(){console.log(t),y(t)||(o(!0),c(Object(l.a)(Object(l.a)({},t),{},{asSuperior:i})))},size:"sm",className:"btn-block",children:y(t)?"Details":"Sign"})},de=function(e,t){return y(t)?Object(a.jsx)(se.a,{size:"sm",children:"Details"}):re(0,t.signatures[0])},ue=n(112),je=function(){return Object(a.jsx)(ue.a,{animation:"border",className:"m-5"})},be=function(e){var t=e.e;return Object(a.jsx)("h6",{className:"p-5",children:t})},me=function(e){var t=Object(r.useState)(),n=Object(i.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(),s=Object(i.a)(o,2),l=s[0],d=s[1],u=Object(r.useState)(!1),j=Object(i.a)(u,2),b=j[0],m=j[1];return Object(r.useEffect)((function(){console.log("url",e),fetch(O+e,{method:"GET"}).then((function(e){return e.json()})).then((function(e){m(!0),c(e)}),(function(e){m(!0),d(e)}))}),[]),[a,b,l]},fe=n(70),Oe=function(e){var t=e.showModal,n=e.setShowModal,r=e.modalInfo,c=e.handleAccept,o=function(){return n(!1)};return Object(a.jsxs)(fe.a,{show:t,onHide:o,centered:!0,children:[Object(a.jsx)(fe.a.Header,{closeButton:!0,children:Object(a.jsx)(fe.a.Title,{children:"Confirm"})}),Object(a.jsx)(fe.a.Body,{children:r.asSuperior?Object(a.jsx)("p",{children:"Do you really want do sign for ".concat("".concat(r.employee.first_name," ").concat(r.employee.last_name))}):Object(a.jsx)("p",{children:"Do you really want do sign the document named ".concat(r.name)})}),Object(a.jsxs)(fe.a.Footer,{children:[Object(a.jsx)(se.a,{variant:"danger",onClick:function(){c(),o()},children:"Accept"}),Object(a.jsx)(se.a,{variant:"secondary",onClick:o,children:"Close"})]})]})},he=function(){var e="/unsigned/signatures/".concat(E().id),t=me(e),n=Object(i.a)(t,3),c=n[0],o=n[1],s=n[2],d=Object(r.useState)(!1),u=Object(i.a)(d,2),j=u[0],b=u[1],m=Object(r.useState)([]),f=Object(i.a)(m,2),h=f[0],p=f[1],x=Object(r.useState)([]),y=Object(i.a)(x,2),k=y[0],F=y[1],T=Object(r.useState)([]),C=Object(i.a)(T,2),N=C[0],_=C[1];if(Object(r.useEffect)((function(){c&&(_(c.documents),F(c.trainings))}),[c]),s)return Object(a.jsx)(be,{e:"Error: ".concat(s.message)});if(!o||!c)return Object(a.jsx)(je,{});var R=function(e,t){return fetch(O+e,{method:"POST",body:new URLSearchParams("id=".concat(t))})},P=function(e){var t=v(h);R("/sign/".concat(t),e).then((function(n){D(n)&&("training"===t?z(e):I(e))}))},L=function(e){R("/sign/superior",e).then((function(t){D(t)&&M(e)}))},z=function(e){F(k.filter((function(t){return t.signatures[0].id!==e})))},I=function(e){_(N.filter((function(t){return t.signatures[0].id!==e})))},M=function(e){var t=N.map((function(t){return Object(l.a)(Object(l.a)({},t),{},{signatures:t.signatures.filter((function(t){return t.id!==e}))})}));_(t.filter((function(e){return e.signatures.length})))},B=function(e,t){return[{dataField:"name",text:"Name",sort:!0},{dataField:"date.Time",text:"Date",sort:!0,formatter:$},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:ee},Object(l.a)(Object(l.a)({},g()),{},{formatter:le,formatExtraData:{setModalInfo:e,setShowModal:t}})]}(p,b),A=function(e,t){return[{dataField:"name",text:"Name",sort:!0,formatter:oe},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:te},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:ee},Object(l.a)(Object(l.a)({},g()),{},{formatter:le,formatExtraData:{setModalInfo:e,setShowModal:t,asSuperior:!1}})]}(p,b),q=function(e,t){return[{dataField:"employee.id",text:"Employee ID",sort:!0},{dataField:"employee.last_name",text:"Full name",sort:!0,formatter:Y},{dataField:"e_date.Time",text:"Sign Date",sort:!0,formatter:re},Object(l.a)(Object(l.a)({},g()),{},{formatter:le,formatExtraData:{setModalInfo:e,setShowModal:t,asSuperior:!0}})]}(p,b),H={onlyOneExpanding:!0,nonExpandable:S(N),renderer:function(e){return Object(a.jsx)(K,{classes:"inner-table",data:e.signatures,columns:q,order:w("employee.last_name")})}};return console.log(c),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K,{title:"Documents to sign",data:N,columns:A,order:w("deadline.Time"),expandRow:H}),Object(a.jsx)(K,{title:"Trainings to sign",data:k,columns:B,order:w("deadline.Time")}),Object(a.jsx)(Oe,{showModal:j,setShowModal:b,modalInfo:h,handleAccept:function(){h.asSuperior?L(h.id):P(h.signatures[0].id),b(!1)}})]})},pe=n(55),xe=n(211),ge=n(204),ve=n(113),ye=function(e){var t=e.notification;return t?Object(a.jsx)(ve.a,{variant:t.variant,children:t.body}):null},Se={sk:{loginPage:{header:"Prihlasovanie",login:"Login",password:"Heslo",submit:"Prihl\xe1si\u0165 sa",notification:{wrongLogin:"Zl\xe9 prihlasovacie \xfadaje",wrongCard:"Nepodarilo sa prihl\xe1senie kartou"}},navigation:{login:"Prihlasit sa",recordsToSign:"Na podp\xedsanie",signedRecords:"Podp\xedsan\xe9",addRecord:"Prida\u0165",savedRecords:"Ulo\u017een\xe9",finder:"Vyh\u013ead\xe1vanie",settings:"Nastavenia",logout:"Odhl\xe1si\u0165 sa"}},en:{loginPage:{header:"Login",login:"Login",password:"Password",submit:"Login",notification:{wrongLogin:"Wrong login input",wrongCard:"Wrong card input"}},navigation:{login:"Login",recordsToSign:"To sign",signedRecords:"Signed",addRecord:"Add new",savedRecords:"Saved",finder:"Finder",settings:"Settings",logout:"Logout"}}},we=function(e){var t=e.onSubmit,n=e.language,r=e.setLanguage,c=e.notification,o=Object(pe.a)(),i=o.register,s=o.handleSubmit,l=function(e){return n===e},d=Se[n].loginPage,u=d.header,b=d.login,m=d.password,f=d.submit;return Object(a.jsx)(j.a,{className:"login-container",children:Object(a.jsxs)(xe.a,{onSubmit:s(t),children:[Object(a.jsx)("h3",{align:"center",children:u}),Object(a.jsxs)(ge.a,{onClick:function(e){return r(e.target.id)},className:"container-fluid p-0 mt-4 mb-5 btn-group",children:[Object(a.jsx)(se.a,{id:"sk",active:l("sk"),children:"Slovak"}),Object(a.jsx)(se.a,{id:"cz",active:l("cz"),disabled:!0,children:"Czech"}),Object(a.jsx)(se.a,{id:"en",active:l("en"),children:"English"}),Object(a.jsx)(se.a,{id:"hu",active:l("hu"),disabled:!0,children:"Hungary"})]}),Object(a.jsxs)(xe.a.Group,{children:[Object(a.jsx)(xe.a.Label,{children:b}),Object(a.jsx)(xe.a.Control,{name:"login",ref:i,required:!0})]}),Object(a.jsxs)(xe.a.Group,{children:[Object(a.jsx)(xe.a.Label,{children:m}),Object(a.jsx)(xe.a.Control,{name:"password",type:"password",ref:i,required:!0})]}),c&&Object(a.jsx)(ye,{notification:c}),Object(a.jsx)(se.a,{type:"submit",variant:"dark",className:"btn-block",children:f})]})})},Ee=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)("sk"),s=Object(i.a)(o,2),l=s[0],d=s[1],j=Se[l].loginPage.notification,b=j.wrongLogin,m=j.wrongCard,f="",h=p();function p(){return setTimeout(x,40)}function x(){10===f.length&&y(f),f=""}clearTimeout(h);var g=function(e){var t=String.fromCharCode(e.keyCode).toLowerCase();(function(e){return function(e){return e.keyCode>=65&&e.keyCode<=90}(e)||function(e){return e.keyCode>=48&&e.keyCode<=57}(e)})(e)&&(f+=t,clearTimeout(h),h=p())};Object(r.useEffect)((function(){return document.addEventListener("keydown",g),function(){return document.removeEventListener("keydown",g)}}));var v=function(e){var t={id:e.id,role:e.role,first_name:e.first_name,last_name:e.last_name};sessionStorage.setItem("user",JSON.stringify(t)),window.location.reload(!1)},y=function(e){fetch(O+"/auth/kiosk",{method:"POST",body:new URLSearchParams("card=".concat(e))}).then((function(e){return e.json()})).then((function(e){v(e)})).catch((function(){return c(C(m))}))};return E()?Object(a.jsx)(u.a,{to:"/records-to-sign"}):Object(a.jsx)(we,{onSubmit:function(e){fetch(O+"/auth/login",{method:"POST",body:new URLSearchParams("login=".concat(e.login,"&password=").concat(e.password))}).then((function(e){return e.json()})).then((function(e){v(e)})).catch((function(){return c(C(b))}))},language:l,setLanguage:d,notification:n})},ke=function(){return k(),Object(a.jsx)(u.a,{to:"/login"})},Fe=function(){var e="/signed/signatures/".concat(E().id),t=me(e),n=Object(i.a)(t,3),r=n[0],c=n[1],o=n[2];if(o)return Object(a.jsx)(be,{e:"Error: ".concat(o.message)});if(!c||!r)return Object(a.jsx)(je,{});var s=[{dataField:"name",text:"Name",sort:!0,formatter:oe},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:te},{dataField:"signatures[0].e_date.Time",text:"Signed date",sort:!0,formatter:de}],l=[{dataField:"employee.id",text:"Employee ID",sort:!0},{dataField:"employee.last_name",text:"Full name",sort:!0,formatter:Y},{dataField:"e_date.Time",text:"Employee Sign",sort:!0,formatter:re},{dataField:"s_date.Time",text:"My Sign",sort:!0,formatter:ne}],d=[{dataField:"name",text:"Name",sort:!0},{dataField:"date.Time",text:"Took place",sort:!0,formatter:$},{dataField:"signatures[0].date.Time",text:"Signed date",sort:!0,formatter:ae}],u={onlyOneExpanding:!0,nonExpandable:S(r.documents),renderer:function(e){return Object(a.jsx)(K,{classes:"inner-table",data:e.signatures,columns:l,order:w("employee.last_name")})}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K,{title:"Signed Documents",data:r.documents,columns:s,expandRow:u,order:w("release_date.Time","desc")}),Object(a.jsx)(K,{title:"Signed Trainings",data:r.trainings,columns:d,order:w("date.Time","desc")})]})},Te=n(205),Ce=n(79),De=function(e){var t=e.label,n=e.name,r=e.placeholder,c=e.type,o=e.register,i=e.as,s=e.required;return Object(a.jsxs)(xe.a.Group,{as:Te.a,children:[Object(a.jsx)(xe.a.Label,{column:!0,sm:"3",children:t}),Object(a.jsx)(Ce.a,{children:Object(a.jsx)(xe.a.Control,{name:n,placeholder:r,ref:o,type:c,as:i,required:s})})]})},Ne=n(207),_e=n(208),Re=n(209),Pe=n(18),Le=n(69),ze=function(e){var t=e.prefill,n=e.disabled,c=e.employees,o=e.combinations,i=e.combination,s=e.setCombination,d=e.notification;console.log(o);var u=Object(r.useContext)(xt),j=P(u),b=function(e,t){var n=t.name;s(Object(l.a)(Object(l.a)({},i),{},Object(Pe.a)({},n,e)))},m=function(e,r){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j[e];return Object(a.jsxs)(a.Fragment,{children:[r,Object(a.jsx)(Le.a,{isMulti:!0,placeholder:"",name:e,options:c,defaultValue:t?t[e]:[],isDisabled:t&&"removedEmployees"!==e||n.includes(e),onChange:function(e,t){return b(e,t)}}),Object(a.jsx)("br",{})]})};return Object(a.jsxs)(Ce.a,{className:"p-0",children:[m("branches","Branches"),m("divisions","Divisions"),m("departments","Departments"),m("cities","Cities"),c&&m("removedEmployees","Remove employees",c),d&&Object(a.jsx)(ye,{notification:d})]})},Ie=function(e){var t=e.prefill,n=e.combinations,c=e.setAssignedTo,o=e.setEmptyAssign,s=e.closeModal,d=Object(r.useContext)(xt),u=Object(r.useState)([]),m=Object(i.a)(u,2),O=m[0],p=m[1],x=Object(r.useState)(),g=Object(i.a)(x,2),v=g[0],y=g[1],S=Object(r.useState)(),w=Object(i.a)(S,2),E=w[0],k=w[1],F=Object(r.useState)(t||{branches:[],divisions:[],departments:[],cities:[],removedEmployees:[]}),T=Object(i.a)(F,2),D=T[0],N=T[1];function _(){p(h),console.log(D);var e=q([D]);console.log(e),J("/employees/".concat(e)).then((function(e){console.log(e),e.length?R(e):y(C("not valid combination"))})).catch((function(e){y(C("not valid combination")),console.log("Errrrrrrrrrrror",e)}))}Object(r.useEffect)((function(){t&&_()}),[]);var R=function(e){k(e.map((function(e){return{value:e.id,label:U(e,d.departments)}})))};return Object(a.jsx)(fe.a,{show:!0,onHide:s,centered:!0,children:Object(a.jsxs)(j.a,{className:"pt-3 pb-3 pl-5 pr-5",children:[Object(a.jsx)(fe.a.Header,{closeButton:!0,children:Object(a.jsx)(fe.a.Title,{children:"Add new combination"})}),Object(a.jsx)(fe.a.Body,{children:Object(a.jsx)(ze,{prefill:t,disabled:O,employees:E,combinations:n,combination:D,setCombination:N,notification:v,setNotification:y})}),Object(a.jsx)(fe.a.Footer,{children:Object(a.jsxs)(Ce.a,{className:"text-center",children:[t?Object(a.jsx)(se.a,{onClick:function(){c((function(e){return e.map((function(e){return e.id===(null===t||void 0===t?void 0:t.id)?Object(l.a)(Object(l.a)({},D),{},{id:f()()}):e}))})),s()},size:"sm",className:"mr-2",children:"Save"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(se.a,{onClick:_,size:"sm",className:"mr-2",children:"Preview"}),Object(a.jsx)(se.a,{onClick:function(){var e=q([D]);J("/employees/".concat(e)).then((function(e){e.length?(y(void 0),o([!1]),c((function(e){return[].concat(Object(b.a)(e),[Object(l.a)(Object(l.a)({},D),{},{id:f()()})])})),s()):y(C("not valid combination"))})).catch((function(e){y(C("not valid combination")),console.log("Errrrrrrrrrrror",e)}))},size:"sm",className:"mr-2",children:"Add"})]}),Object(a.jsx)(se.a,{onClick:s,variant:"secondary",size:"sm",children:"close"})]})})]})})},Me=n(210),Be=n(206),Ae=function(e){var t=e.combinations,n=e.assignedTo,c=e.setAssignedTo,o=e.setEmptyAssign,s=Object(r.useState)(!1),d=Object(i.a)(s,2),u=d[0],j=d[1],b=Object(r.useState)(),m=Object(i.a)(b,2),f=m[0],O=m[1],h=function(){return j(!0)},p=function(){return Object(a.jsxs)(se.a,{variant:"dark",onClick:h,size:"sm",className:"mb-2",children:[Object(a.jsx)(Re.a,{size:"20",color:"white"}),Object(a.jsx)("span",{children:"add combination"})]})},x=function(e){return Object(a.jsx)(a.Fragment,{children:null===e||void 0===e?void 0:e.map((function(e){return e.label})).join(",")})},v=[{dataField:"branches",text:"branches",formatter:function(e,t){return x(t.branches)}},{dataField:"divisions",text:"Divisions",formatter:function(e,t){return x(t.divisions)}},{dataField:"departments",text:"departments",formatter:function(e,t){return x(t.departments)}},{dataField:"cities",text:"cities",formatter:function(e,t){return x(t.cities)}},Object(l.a)(Object(l.a)({},g("edit")),{},{formatter:function(e,t){return Object(a.jsx)(Me.a,{placement:"right",overlay:Object(a.jsx)(Be.a,{id:"tooltip-right",className:"text-left",children:t.removedEmployees&&t.removedEmployees.length?t.removedEmployees.map((function(e){return Object(a.jsx)("p",{children:e.label},e.value)})):Object(a.jsx)("p",{children:"Empty"})}),children:Object(a.jsx)(Ne.a,{size:"25",color:"black",onClick:function(){return function(e){console.log(e),O(e),h()}(t)}})})}}),Object(l.a)(Object(l.a)({},g("del")),{},{formatter:function(e,t){return Object(a.jsx)(_e.a,{size:"25",color:"red",onClick:function(){return function(e){c((function(t){return t.filter((function(t){return t.id!==e.id}))}))}(t)}})}})];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K,{data:n,columns:v,wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),Object(a.jsx)(p,{}),u&&Object(a.jsx)(Ie,{prefill:f,combinations:t,setAssignedTo:c,setEmptyAssign:o,closeModal:function(){O(void 0),j(!1)}})]})},qe=function(e){var t=e.setRecords,n=e.formData,c=e.setFormData,o=e.actual,s=Object(r.useContext)(xt);console.log(n);var d,u=Object(pe.a)({defaultValues:(d=n,d?Object(l.a)(Object(l.a)({},d),{},{release_date:A(d.release_date),deadline:A(d.deadline)}):{})}),j=u.register,b=u.handleSubmit,m=x,f=Object(r.useState)(),h=Object(i.a)(f,2),p=h[0],g=h[1],v=Object(r.useState)(n?n.type:""),y=Object(i.a)(v,2),S=y[0],w=y[1],E=Object(r.useState)(N(n)),k=Object(i.a)(E,2),F=k[0],P=k[1],L=Object(r.useState)(),I=Object(i.a)(L,2),M=I[0],H=I[1],U=Object(r.useState)([]),G=Object(i.a)(U,2),J=G[0],V=G[1],X=Object(r.useState)([]),W=Object(i.a)(X,2),K=W[0],Z=W[1],Y=Object(r.useState)([!0]),Q=Object(i.a)(Y,2),$=Q[0],ee=Q[1];Object(r.useEffect)((function(){return H(void 0)}),$),Object(r.useEffect)((function(){fetch(O+"/combinations",{method:"GET"}).then((function(e){return e.json()})).then((function(e){V(R(e))})).catch((function(e){return console.log(e)})),fetch(O+"/employees/all",{method:"GET"}).then((function(e){return e.json()})).then((function(e){Z(z(n,s,e))})).catch((function(e){return console.log(e)}))}),[]);var te=function(e,t){return console.log(e),fetch(O+"/document/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(e){return D(e)?H(T("".concat(t," was successful"))):H(C("".concat(t," failed"))),e.json()})).catch((function(e){return console.log("error",e)}))},ne=function(e,n){return console.log(e),fetch(O+"/document/".concat(n),{method:"POST",body:JSON.stringify(e)}).then((function(a){return H(T("".concat(n," was successful"))),t&&ae(e),c&&c(void 0),console.log(a),a.json()})).catch((function(e){H(C("".concat(n," failed"))),console.log("error",e)}))},ae=function(e){t((function(t){return t.filter((function(t){return t.id!==e.id}))}))},re=function(e){t((function(t){var n=t;return n[t.findIndex((function(t){return t.id===e.id}))]=e,n}))};return Object(a.jsxs)(xe.a,{onChange:function(){return H(void 0)},onSubmit:b((function(e){0!==K.length?(console.log("raw",K),e=function(e,t){return Object(l.a)(Object(l.a)({},e),{},{release_date:B(e.release_date),deadline:B(e.deadline),assigned_to:q(t)})}(e,K),console.log("data",e),"save"===p&&(F?(e=Object(l.a)(Object(l.a)({},e),{},{id:F}),te(e,"update"),re(e)):te(e,"create").then((function(e){return P(null===e||void 0===e?void 0:e.id)}))),"send"===p&&(F?(e=Object(l.a)(Object(l.a)({},e),{},{id:F}),o?ne(e,"create/confirm").then((function(e){return P(null===e||void 0===e?void 0:e.id)})):ne(e,"update/confirm")):ne(e,"create/confirm").then((function(e){return P(null===e||void 0===e?void 0:e.id)})))):H(C("At least one combination is required"))})),children:[Object(a.jsxs)(xe.a.Group,{as:Te.a,children:[Object(a.jsx)(xe.a.Label,{column:!0,sm:"3",children:"Type*"}),Object(a.jsx)(Ce.a,{children:Object(a.jsx)(xe.a.Control,{onChange:function(e){return w(e.target.value)},as:"select",name:"type",ref:j({validate:function(e){return""!==e}}),required:!0,value:S,children:_(m)})})]}),Object(a.jsxs)(xe.a.Group,{as:Te.a,children:[Object(a.jsx)(xe.a.Label,{column:!0,sm:"3",children:" "}),Object(a.jsx)(Ce.a,{children:Object(a.jsx)(xe.a.Check,{inline:!0,label:"require superior",name:"require_superior",ref:j})})]}),Object(a.jsx)(De,{label:"Document name*",name:"name",placeholder:"Enter document name",register:j,required:!0}),Object(a.jsx)(De,{label:"Link to sharepoint",name:"link",placeholder:"Enter document link to sharepoint",register:j}),Object(a.jsx)(De,{label:"Release date*",name:"release_date",type:"date",register:j,required:!0}),Object(a.jsx)(De,{label:"Days to deadline*",name:"deadline",type:"date",register:j,required:!0}),Object(a.jsx)(De,{label:"Version*",name:"version",placeholder:"Enter version",register:j,required:!0}),Object(a.jsx)(De,{label:"Order number*",name:"order_number",type:"number",placeholder:"Enter number",register:j({valueAsNumber:!0}),required:!0}),Object(a.jsx)(De,{label:"Note",name:"note",as:"textarea",placeholder:"Enter note",register:j}),Object(a.jsx)(Ae,{combinations:J,assignedTo:K,setAssignedTo:Z,emptyAssign:$,setEmptyAssign:ee}),M&&Object(a.jsx)(ye,{notification:M}),Object(a.jsxs)("div",{className:"pt-1 btn-block text-right",children:[Object(a.jsx)(se.a,{variant:"outline-primary",type:"submit",className:"mr-1",onClick:function(){return g("save")},children:"Save"}),Object(a.jsx)(se.a,{type:"submit",onClick:function(){return g("send")},children:o?"Send as new version":"Send"})]})]})},He=n(117),Ue=(n(194),function(e){var t=e.setRecords,n=e.formData,c=e.setFormData,o=e.actual,s=Object(r.useContext)(xt);console.log(n);var d,u=Object(pe.a)({defaultValues:(d=n,d?Object(l.a)(Object(l.a)({},d),{},{date:A(d.date),deadline:A(d.deadline)}):{})}),j=u.register,b=u.handleSubmit,m=Object(r.useState)(),f=Object(i.a)(m,2),h=f[0],p=f[1],x=Object(r.useState)(N(n)),g=Object(i.a)(x,2),v=g[0],y=g[1],S=Object(r.useState)(),w=Object(i.a)(S,2),E=w[0],k=w[1],F=Object(r.useState)([]),_=Object(i.a)(F,2),R=_[0],P=_[1],L=Object(r.useState)([]),z=Object(i.a)(L,2),I=z[0],M=z[1],q=Object(r.useState)([!0]),G=Object(i.a)(q,2),J=G[0],V=G[1];Object(r.useEffect)((function(){return k(void 0)}),J),Object(r.useEffect)((function(){fetch(O+"/employees/all",{method:"GET"}).then((function(e){return e.json()})).then((function(e){P(e),M(function(e,t){return t=H(t),e&&e.employees?e.employees.split(",").map((function(e){return t.find((function(t){return t.id==e}))})):[]}(n,e))})).catch((function(e){return console.log(e)}))}),[]);var X=function(e,t){return fetch(O+"/training/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(e){return D(e)?k(T("".concat(t," was successful"))):k(C("".concat(t," failed"))),e.json()})).catch((function(e){return console.log("error",e)}))},W=function(e,n){return console.log(e),fetch(O+"/training/".concat(n),{method:"POST",body:JSON.stringify(e)}).then((function(a){return D(a)?(k(T("".concat(n," was successful"))),t&&K(e),c&&c(void 0)):k(C("".concat(n," failed"))),console.log(a),a.json()})).catch((function(e){return console.log("error",e)}))},K=function(e){t((function(t){return t.filter((function(t){return t.id!==e.id}))}))},Z=function(e){t((function(t){var n=t;return n[t.findIndex((function(t){return t.id===e.id}))]=e,n}))};return Object(a.jsxs)(xe.a,{onChange:function(){return k(void 0)},onSubmit:b((function(e){I.length?(e=function(e,t){return Object(l.a)(Object(l.a)({},e),{},{date:B(e.date),deadline:B(e.deadline),employees:t.map((function(e){return e.id})).join(",")})}(e,I),console.log(e),"save"===h&&(v?(e=Object(l.a)(Object(l.a)({},e),{},{id:v}),X(e,"update"),Z(e)):X(e,"create").then((function(e){return y(null===e||void 0===e?void 0:e.id)}))),"send"===h&&(v?(e=Object(l.a)(Object(l.a)({},e),{},{id:v}),o?W(e,"create/confirm").then((function(e){return y(null===e||void 0===e?void 0:e.id)})):W(e,"update/confirm")):W(e,"create/confirm").then((function(e){return y(null===e||void 0===e?void 0:e.id)})))):k(C("At least one employee is required"))})),children:[Object(a.jsx)(De,{label:"Training name*",name:"name",placeholder:"Enter document name",register:j,required:!0}),Object(a.jsx)(De,{label:"Name of lector",name:"lector",placeholder:"Enter document link to sharepoint",register:j}),Object(a.jsx)(De,{label:"Name of agency",name:"agency",placeholder:"Enter agency",register:j}),Object(a.jsx)(De,{label:"Place",name:"place",placeholder:"Enter place",register:j}),Object(a.jsx)(De,{label:"Date*",name:"date",type:"date",placeholder:"Enter date",register:j,required:!0}),Object(a.jsx)(De,{label:"Days to deadline*",name:"deadline",type:"date",defaultValue:"14",register:j,required:!0}),Object(a.jsx)(De,{label:"Duration",name:"duration",type:"number",placeholder:"Enter duration",register:j({valueAsNumber:!0})}),Object(a.jsx)(De,{label:"Agenda*",name:"agenda",as:"textarea",placeholder:"Enter agenda",register:j,required:!0}),Object(a.jsxs)(xe.a.Group,{as:Te.a,children:[Object(a.jsx)(xe.a.Label,{column:!0,sm:"3",children:"Add employees*"}),Object(a.jsx)(Ce.a,{children:Object(a.jsx)(He.a,{id:"basic-typeahead-single",name:"employees",labelKey:function(e){return U(e,s.departments)},multiple:!0,placeholder:"Choose an employees...",selected:I,options:R,onChange:function(e){M(e),V([!1])}})})]}),E&&Object(a.jsx)(ye,{notification:E}),Object(a.jsxs)("div",{className:"pt-1 btn-block text-right",children:[Object(a.jsx)(se.a,{variant:"outline-primary",type:"submit",className:"mr-1",onClick:function(){return p("save")},children:"Save"}),Object(a.jsx)(se.a,{type:"submit",onClick:function(){return p("send")},children:"Send"})]})]})}),Ge=function(){var e=Object(r.useState)("document"),t=Object(i.a)(e,2),n=t[0],c=t[1],o=function(e){return n===e&&"active"};return Object(a.jsxs)(j.a,{className:"w-75",children:[Object(a.jsxs)(ge.a,{onClick:function(e){return c(e.target.id)},className:"btn-group btn-header",children:[Object(a.jsx)(se.a,{id:"document",className:o("document"),children:"Document"}),Object(a.jsx)(se.a,{id:"training",className:o("training"),children:"Online training"})]}),"document"===n&&Object(a.jsx)(qe,{}),"training"===n&&Object(a.jsx)(Ue,{})]})},Je=function(e,t,n,r){var c=r.setFormData;return Object(a.jsx)(se.a,{variant:"outline-primary",onClick:function(){return c(t)},size:"sm",children:"Edit"})},Ve=function(e,t,n,r){var c=r.setSavedRec,o=r.setNotification,i=function(){c((function(e){return e.filter((function(e){return e.id!==t.id}))}))};return Object(a.jsx)(se.a,{id:"save",size:"sm",onClick:function(){fetch(O+"".concat(v(t),"/confirm/").concat(t.id),{method:"GET"}).then((function(e){D(e)?(i(),o(T("Record ".concat(t.name," was successfully sent")))):o(C("Sending the ".concat(t.name," failed")))})).catch((function(e){return console.log(e)}))},children:"Send"})},Xe=function(e){var t=e.setRecords,n=e.formData,r=e.setFormData,c=e.actual,o=v(n),i={setRecords:t,formData:n,setFormData:r,actual:c};return Object(a.jsxs)(fe.a,{show:!0,onHide:function(){return r(void 0)},centered:!0,size:"lg",children:[Object(a.jsx)(fe.a.Header,{closeButton:!0,children:Object(a.jsxs)(fe.a.Title,{children:["Edit ",o]})}),Object(a.jsx)(fe.a.Body,{children:"document"===o?Object(a.jsx)(qe,Object(l.a)({},i)):Object(a.jsx)(Ue,Object(l.a)({},i))})]})},We=function(){var e=me("/document/edited"),t=Object(i.a)(e,3),n=t[0],c=t[1],o=t[2],s=me("/training/edited"),d=Object(i.a)(s,3),u=d[0],j=d[1],b=d[2],m=Object(r.useState)([]),f=Object(i.a)(m,2),O=f[0],h=f[1],p=Object(r.useState)([]),x=Object(i.a)(p,2),y=x[0],S=x[1],E=Object(r.useState)(),k=Object(i.a)(E,2),F=k[0],T=k[1],C=Object(r.useState)(),D=Object(i.a)(C,2),N=D[0],_=D[1];if(Object(r.useEffect)((function(){n&&u&&(h(n),S(u))}),[n,u]),o)return Object(a.jsx)(be,{e:"Error: ".concat(o.message)});if(b)return Object(a.jsx)(be,{e:"Error: ".concat(b.message)});if(!c||!n||!j||!u)return Object(a.jsx)(je,{});var R=function(e,t,n){return[{dataField:"name",text:"Name",sort:!0},{dataField:"date.Time",text:"Release",sort:!0,formatter:$},{dataField:"place",text:"Place",sort:!0},Object(l.a)(Object(l.a)({},g("EditBtn")),{},{formatter:Je,formatExtraData:{setFormData:e}}),Object(l.a)(Object(l.a)({},g("SendBtn")),{},{formatter:Ve,formatExtraData:{setNotification:n,setSavedRec:t}})]}(_,S,T),P=function(e,t,n){return[{dataField:"name",text:"Name",sort:!0},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:te},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:ee},Object(l.a)(Object(l.a)({},g("EditBtn")),{},{formatter:Je,formatExtraData:{setFormData:e}}),Object(l.a)(Object(l.a)({},g("SendBtn")),{},{formatter:Ve,formatExtraData:{setNotification:n,setSavedRec:t}})]}(_,h,T);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K,{title:"Saved trainings",data:O,columns:P,order:w("deadline.Time")}),Object(a.jsx)(K,{title:"Saved documents",data:y,columns:R,order:w("deadline.Time")}),F&&Object(a.jsx)(ye,{notification:F}),N&&Object(a.jsx)(Xe,{setRecords:"document"===v(N)?h:S,formData:N,setFormData:_})]})},Ke=function(e){e.submitError;var t=Object(r.useState)(),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(null),l=Object(i.a)(s,2),d=l[0],u=l[1],j=Object(r.useState)({}),b=Object(i.a)(j,2),m=b[0],f=b[1],h=Object(r.useState)(""),p=Object(i.a)(h,2),x=p[0],g=p[1],v=Object(r.useState)(""),y=Object(i.a)(v,2),S=y[0],w=y[1],E=Object(r.useState)(null),k=Object(i.a)(E,2),F=k[0],T=k[1],C="OK";Object(r.useEffect)((function(){var e=sessionStorage.getItem("showDeleted");null===e?sessionStorage.setItem("showDeleted",!1):null===F?T(e):(document.getElementById("checkShowDeleted").checked=JSON.parse(F),sessionStorage.setItem("showDeleted",F))}),[F]);var D=function(e){return Object(a.jsxs)(ve.a,{variant:"danger",style:{color:"red"},children:[Object(a.jsx)(Z.a,{size:"18",style:{margin:"5px",padding:"5px"}})," ",e]})},N=function(){return Object(a.jsxs)(ve.a,{variant:"success",style:{color:"green"},children:[Object(a.jsx)(Z.a,{size:"18",style:{margin:"5px",padding:"5px"}})," ","Successfully uploaded."]})},R=function(){w(""),g("")},P=function(e){return""!==e&&e!==C},L=function(e){return e===C};return Object(a.jsxs)("div",{children:[Object(a.jsx)("script",{crossOrigin:"true"}),Object(a.jsx)("p",{className:"pt-5",children:Object(a.jsx)("strong",{children:"IMPORT EMPLOYEES"})}),Object(a.jsxs)(xe.a,{children:[Object(a.jsx)("select",{onChange:function(e){return o(e.target.value)},name:"type",required:!0,value:c,children:_(["import_1","import_2","import_3","import_5"])}),Object(a.jsx)("span",{children:" Choose import"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"file",required:!0,onChange:function(e){return f(e.target.files[0])}}),Object(a.jsx)(se.a,{type:"button",onClick:function(e){R();var t=new FormData,n="employees_upload_".concat(Date.now());if(c&&void 0!==m.name)t.append("file",m),t.append("name",n),t.append("import",c),fetch(O+"http://localhost:7777/file/upload",{mode:"no-cors",method:"POST",body:t}).then((function(e){w(C),e.ok?alert("Perfect! "):401===e.status&&alert("Oops! ")}),(function(e){alert("Error submitting form!")}));else{w(c?"File is not set":"Import is not set")}},children:"Upload"}),P(S)&&D(S),L(S)&&N()]}),Object(a.jsx)("hr",{}),Object(a.jsx)("p",{className:"pt-5",children:Object(a.jsx)("strong",{children:"IMPORT CARDS"})}),Object(a.jsxs)(xe.a,{children:[Object(a.jsx)("p",{children:"Upload file with employee card information."}),Object(a.jsx)("input",{type:"file",id:"cardsFile",onChange:function(e){return u(e.target.files[0])}}),Object(a.jsx)(se.a,{type:"button",onClick:function(e){R();var t=new FormData,n="kiosk_upload_".concat(Date.now());if(t.append("file",d),t.append("name",n),console.log(d),null!=d)fetch(O+"http://localhost:7777/file/upload",{mode:"no-cors",method:"POST",body:t}).then((function(e){g(C),e.ok?alert("Perfect! "):401===e.status&&alert("Oops! ")}),(function(e){alert("Error submitting form!")}));else{g("File not set")}},children:"Upload"}),P(x)&&D(x),L(x)&&N()]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"form-check mt-5",children:[Object(a.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"checkShowDeleted",onClick:function(){T(!F)}}),Object(a.jsx)("strong",{children:"SHOW DELETED EMPLOYEES"}),Object(a.jsx)("span",{children:" <-- not implemented :("})]})]})},Ze={branches:[],cities:[],departments:[],divisions:[]},Ye=function(e){var t=e.em,n=e.es,c=e.setEm,o=e.showSM,s=e.setShowSM,d=e.matrixByFilter,u=e.matrixBySuperior,j=e.searchByEmployee,b=e.searchByCombination,m=Object(r.useState)(Ze),f=Object(i.a)(m,2),O=f[0],h=f[1],p=Object(r.useContext)(xt),x=P(p),g=Object(r.useRef)(),v=Object(r.useRef)(),y=Object(r.useRef)(),S=Object(r.useRef)(),w=Object(r.useRef)(),E=function(){h((function(e){return{branches:[],cities:e.cities,departments:e.departments,divisions:[]}}))},k=function(){c(void 0),w.current.select.clearValue()},F=function(){var e;(k(),o)?(E(),d({branch:"",city:O.cities.map((function(e){return e.value})).join(","),department:O.departments.map((function(e){return e.value})).join(","),division:""})):b({branch:(e=O).branches.map((function(e){return e.value})).join(","),city:e.cities.map((function(e){return e.value})).join(","),department:e.departments.map((function(e){return e.value})).join(","),division:e.divisions.map((function(e){return e.value})).join(",")})},T=function(e){e&&(c(e),h(Ze),o?u(e):j(e))},C=function(e,t,n){return Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Le.a,{isMulti:!0,value:O[e],name:e,placeholder:t,options:x[e],onChange:function(e,t){return function(e,t){var n=t.name;k(),h(Object(l.a)(Object(l.a)({},O),{},Object(Pe.a)({},n,e)))}(e,t)},ref:n})})};return Object(a.jsxs)(xe.a,{children:["Search by combination",Object(a.jsxs)(Te.a,{className:"pb-2",children:[C("branches","Branches",g),C("divisions","Divisions",v),C("departments","Departments",y),C("cities","Cities",S),Object(a.jsx)(se.a,{onClick:F,children:"Search"})]}),Object(a.jsxs)(Te.a,{children:[Object(a.jsxs)(Ce.a,{xs:"3",children:["Search by employee",Object(a.jsx)(Le.a,{value:t,name:"employeeName",placeholder:"Employee Name",options:n,onChange:function(e){return T(e)},ref:w})]}),Object(a.jsxs)(Ce.a,{className:"text-right pr-0",children:[Object(a.jsx)(se.a,{className:"mr-3",variant:"outline-primary",onClick:function(){var e=!o;e?t?u(t):(E(),d({branch:"",city:O.cities.map((function(e){return e.value})).join(","),department:O.departments.map((function(e){return e.value})).join(","),division:""})):t?T(t):F(),s(e)},children:"Show ".concat(o?"table":"skillMatrix")}),Object(a.jsx)(se.a,{className:"ml-1",disabled:!0,children:"Export"})]})]})]})},Qe=function(e,t,n,r){r.id;var c,o=r.data,i=r.setData,s=r.i,d=o[n],u=null===(c=d.employees[s])||void 0===c?void 0:c.state,j=u.includes("X");function m(){return u.includes("X")?1===u.length&&"X"!==u?u:u.substr(1):u}j&&(u=m());var f={backgroundColor:function(e){switch(e){case"-":return"gray";case"_":return"cornflowerblue";case"es":return"tomato";case"e":return"orange";case"s":return"gold";default:return"green"}}(u),color:"s"===u?"black":"white",borderColor:j?"black":"white",borderWidth:"5px"};return Object(a.jsx)(se.a,{style:f,onClick:function(){var e=j?m():"X"+u;console.log(e);var t=Object(b.a)(d.employees);t[s]=Object(l.a)(Object(l.a)({},t[s]),{},{state:e});var a=Object(b.a)(o);a[n]=Object(l.a)(Object(l.a)({},d),{},{employees:t}),i(a)},className:"btn-block",children:function(){var e;return null===(e=[{state:"-",label:"no need"},{state:"es",label:"miss e+s"},{state:"e",label:"miss e"},{state:"s",label:"miss s"},{state:"",label:"well done"},{state:"X",label:"bug"},{state:"_",label:"not send"}].find((function(e){return e.state===u})))||void 0===e?void 0:e.label}()})},$e=n(214),et=function(e){var t=e.data,n=e.setAction,r=e.setModalInfo,c=e.setShowModal,o=e.handleAccept,i=e.showLegend,s=e.setShowLegend,l=function(e){var t=e.target.id;n(t),"cancel"===t?o():(r({body:"Do you really want to ".concat(t," selected signatures?")}),c(!0))},d=0===t.length;return Object(a.jsxs)(Te.a,{className:"mb-3",children:[Object(a.jsx)(Ce.a,{className:"text-left",children:Object(a.jsx)(ge.a,{className:"div-btn",size:"sm",children:Object(a.jsx)(se.a,{onClick:function(){return s(!i)},children:i?"Hide legend":"Show legend"})})}),Object(a.jsx)(Ce.a,{className:"text-right",children:Object(a.jsxs)(ge.a,{className:"div-btn",onClick:l,size:"sm",children:[Object(a.jsx)(se.a,{id:"sign",size:"sm",disabled:d,children:"Sign"}),Object(a.jsx)(se.a,{id:"cancelDuty",size:"sm",disabled:d,children:"Cancel duty"}),Object(a.jsx)(se.a,{id:"trainAgain",size:"sm",disabled:d,children:"Train again"}),Object(a.jsx)(se.a,{id:"cancel",size:"sm",onClick:l,disabled:d,children:"Cancel"})]})})]})},tt=function(){var e=function(e){var t=e.color,n=e.textColor,r=void 0===n?"white":n,c=e.label,o=e.text,i={background:t,borderColor:t,color:r,width:"80px",height:"20px",fontSize:".7rem",fontWeight:"bold",padding:"0"};return Object(a.jsx)("p",{children:Object(a.jsxs)("span",{children:[Object(a.jsx)(se.a,{style:i,children:c})," ".concat(o)]})})};return Object(a.jsx)($e.a,{style:{width:"30rem",marginTop:"1rem",fontSize:".7rem",marginBottom:".75rem"},children:Object(a.jsxs)($e.a.Body,{children:[Object(a.jsx)($e.a.Subtitle,{className:"mb-3 text-muted",children:"Legend:"}),Object(a.jsxs)($e.a.Text,{children:[Object(a.jsx)(e,{label:"no need",text:"Zamestnanec bol odzna\u010den\xfd z potreby obozn\xe1menia",color:"gray"}),Object(a.jsx)(e,{label:"miss e+s",text:"Ani zamestnanec ani nadriaden\xfd e\u0161te nepotvrdili",color:"tomato"}),Object(a.jsx)(e,{label:"miss e",text:"Zamestnanec nepotvrdil",color:"orange"}),Object(a.jsx)(e,{label:"miss s",text:"Nadriaden\xfd nepotvrdil",color:"gold",textColor:"white"}),Object(a.jsx)(e,{label:"well done",text:"Dokument je potvrden\xfd",color:"green"}),Object(a.jsx)(e,{label:"not sent",text:"Este neodoslane",color:"cornflowerblue"}),Object(a.jsxs)("p",{children:[Object(a.jsx)(Z.a,{style:{color:"red",marginBottom:"4px"}})," ","Uplynul deadline a ch\xfdbaj\xfa podpisy"]}),Object(a.jsxs)("p",{children:["hviezdi\u010dka ",Object(a.jsx)("strong",{children:"*"})," znamena, ze zamestnanec sa opakovane pre\u0161koluje"]})]})]})})},nt=function(e){var t=e.documents,n=Object(r.useState)([]),c=Object(i.a)(n,2),o=c[0],s=c[1],d=Object(r.useState)([]),u=Object(i.a)(d,2),j=u[0],b=u[1];Object(r.useEffect)((function(){var e=t[0];e&&e.signatures?(b((function(){var t=e.signatures.map((function(e){return e.employee}));return H(t)})),s(function(e){return e.map((function(e){return{id:e.id,name:e.name,require_superior:e.require_superior,deadline:e.deadline.Time,employees:e.signatures.filter((function(e){return null!==e.employee})).map((function(t){return{id:t.employee.id,sign_id:t.id,state:L(t,e.require_superior)}}))}}))}(t))):s([])}),[t]);var m=Object(r.useState)(!1),f=Object(i.a)(m,2),h=f[0],p=f[1],x=Object(r.useState)(!1),v=Object(i.a)(x,2),y=v[0],S=v[1],w=Object(r.useState)({}),E=Object(i.a)(w,2),k=E[0],F=E[1],T=Object(r.useState)(""),C=Object(i.a)(T,2),D=C[0],N=C[1],_=function(){var e=[{dataField:"name",text:"Document Name",formatter:ie}],t=0;return console.log(o),j.forEach((function(n){var a="".concat(n.first_name," ").concat(n.last_name,", ").concat(n.job_title);e.push(Object(l.a)(Object(l.a)({},g(n.id,a)),{},{formatter:Qe,formatExtraData:{id:n.id,data:o,setData:s,i:t++%j.length}}))})),e}();function R(e){return"s"===e?"":"e"}var P=function(){var e=o.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{employees:e.employees.map((function(t){return function(e,t){if(!function(e){return e.state.includes("X")}(t))return t;var n=t.state.replace("X","");return"sign"===D?"-"===n||"e"===n||""===n?Object(l.a)(Object(l.a)({},t),{},{state:n}):(fetch(O+"/sign/superior",{method:"POST",body:new URLSearchParams("id=".concat(t.sign_id))}),Object(l.a)(Object(l.a)({},t),{},{state:R(n)})):"cancelDuty"===D?"-"===n?Object(l.a)(Object(l.a)({},t),{},{state:n}):(fetch(O+"/cancels",{method:"POST",body:new URLSearchParams(t.sign_id.toString())}),Object(l.a)(Object(l.a)({},t),{},{state:"-"})):"trainAgain"===D?e&&"e+s"===n?Object(l.a)(Object(l.a)({},t),{},{state:n}):e||"e"!==n?(fetch(O+"/resigns",{method:"POST",body:new URLSearchParams(t.sign_id.toString())}),n=function(e){return e?"es":"s"}(t.sign_id),Object(l.a)(Object(l.a)({},t),{},{state:n})):Object(l.a)(Object(l.a)({},t),{},{state:n}):void 0}(e.require_superior,t)}))})}));s(e)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K,{title:"SkillMatrix",classes:"skill-matrix-table",data:o,columns:_,wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),Object(a.jsx)(et,{data:o,setAction:N,setModalInfo:F,setShowModal:S,handleAccept:P,handleExport:function(){},showLegend:h,setShowLegend:p}),h&&Object(a.jsx)(tt,{}),Object(a.jsx)(Oe,{showModal:y,setShowModal:S,modalInfo:k,handleAccept:P})]})},at=function(e,t){return Object(a.jsx)(se.a,{onClick:function(){V("/report/?id=".concat(t.id))},size:"sm",children:"report"})},rt=function(e){var t=e.found,n=e.setFound,c=Object(r.useState)(),o=Object(i.a)(c,2),s=o[0],d=o[1];console.log(t);var u=[{dataField:"name",text:"Name",sort:!0},{dataField:"release_date.Time",text:"Release",formatter:te,sort:!0},{dataField:"type",text:"Type",sort:!0},{dataField:"branches",text:"Branches",sort:!0},{dataField:"divisions",text:"Divisions",sort:!0},{dataField:"departments",text:"Departments",sort:!0},{dataField:"cities",text:"Cities",sort:!0},{dataField:"complete",text:"State",formatter:ce,sort:!0},Object(l.a)(Object(l.a)({},g("EditBtn")),{},{formatter:Je,formatExtraData:{setFormData:d}}),Object(l.a)(Object(l.a)({},g("ReportBtn")),{},{formatter:at})];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K,{title:"Found documents",data:t,columns:u,defaultSorted:w("name"),wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),s&&Object(a.jsx)(Xe,{setRecords:n,formData:s,setFormData:d,actual:!0})]})},ct=function(e){var t=e.found,n=e.setFound,c=e.setReport,o=Object(r.useState)(),s=Object(i.a)(o,2),d=s[0],u=s[1],j=[{dataField:"name",text:"Name",sort:!0},{dataField:"date.Time",text:"Release",formatter:$,sort:!0},{dataField:"lector",text:"lector",sort:!0},{dataField:"agency",text:"agency",sort:!0},{dataField:"place",text:"place",sort:!0},{dataField:"complete",text:"State",formatter:ce,sort:!0},Object(l.a)(Object(l.a)({},g("EditBtn")),{},{formatter:Je,formatExtraData:{setFormData:u}}),Object(l.a)(Object(l.a)({},g("ReportBtn")),{},{formatter:at,formatExtraData:{setReport:c}})];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K,{title:"Found trainings",data:t,columns:j,defaultSorted:w("name"),wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),d&&Object(a.jsx)(Xe,{setRecords:n,formData:d,setFormData:u,actual:!0})]})},ot=function(e){var t=e.documents,n=e.setDocuments,r=e.trainings,c=e.setTrainings;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(rt,{found:t,setFound:n}),Object(a.jsx)(ct,{found:r,setFound:c})]})},it=function(){var e=Object(r.useContext)(xt),t=Object(r.useState)([]),n=Object(i.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)([]),d=Object(i.a)(s,2),u=d[0],j=d[1],m=Object(r.useState)(),f=Object(i.a)(m,2),h=f[0],p=f[1],x=Object(r.useState)([]),g=Object(i.a)(x,2),v=g[0],y=g[1],S=Object(r.useState)([]),w=Object(i.a)(S,2),E=w[0],k=w[1],F=Object(r.useState)([]),T=Object(i.a)(F,2),C=T[0],D=T[1],N=Object(r.useState)(),_=Object(i.a)(N,2),P=_[0],L=_[1];Object(r.useEffect)((function(){J("/combinations").then((function(e){return o(R(e))})),J("/employees/all").then((function(t){return j((n=t,a=e.departments,(n=H(n)).map((function(e){return{value:e.id,label:U(e,a)}}))));var n,a}))}),[]),Object(r.useEffect)((function(){J("/document/actual").then((function(t){return y(G(t,e))}))}),[c]);var z=function(){y([]),k([])};function I(e,t){return e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{complete:t})}))}return c.length&&u.length?Object(a.jsxs)("div",{style:{marginTop:"1%"},className:"finder",children:[Object(a.jsx)(Ye,{cs:c,em:h,es:u,setEm:p,showSM:P,setShowSM:L,matrixByFilter:function(e){console.log(e),fetch(O+"skill/matrix",{method:"POST",body:new URLSearchParams("filter=".concat(JSON.stringify(e)))}).then((function(e){return e.json()})).then((function(e){console.log(e),D(e.documents)}))},matrixBySuperior:function(e){p(e);var t=e.value;fetch(O+"/skill/matrix",{method:"POST",body:new URLSearchParams("superior_id=".concat(t))}).then((function(e){return e.json()})).then((function(e){D(e.documents)}))},searchByEmployee:function(t){if(t){console.log(t),p(t),z();var n=t.value;J("/signed/signatures/".concat(n)).then((function(t){console.log(t);var n=I(t.trainings,100);k((function(e){return[].concat(Object(b.a)(e),Object(b.a)(n))}));var a=I(t.documents,100);a=G(a,e),y((function(e){return[].concat(Object(b.a)(e),Object(b.a)(a))}))})),J("/unsigned/signatures/".concat(n)).then((function(t){console.log(t);var n=I(t.trainings,0);k((function(e){return[].concat(Object(b.a)(e),Object(b.a)(n))}));var a=I(t.documents,0);a=G(a,e),y((function(e){return[].concat(Object(b.a)(e),Object(b.a)(a))}))}))}},searchByCombination:function(t){var n,a;z(),console.log(t),(n="/document/filter",a=JSON.stringify(t),fetch(O+n,{method:"POST",body:a}).then((function(e){return e.json()}))).then((function(t){return y(G(t,e))}))}}),P?Object(a.jsx)(nt,{documents:C}):Object(a.jsx)(ot,{documents:v,setDocuments:y,trainings:E,setTrainings:k})]}):Object(a.jsx)(je,{})},st=function(e){var t,n=e.location.search,c=Object(r.useState)(),o=Object(i.a)(c,2),s=o[0],d=o[1],u=Object(r.useState)([]),j=Object(i.a)(u,2),b=j[0],m=j[1],f=function(e){var t=Q(e);return"01.01.0001"===t?"-":t};if(Object(r.useEffect)((function(){var e=n.split("=");if(2!==e.length)return null;var t=Object(i.a)(e,2),a=t[0],r=t[1];return"?id"!==a||parseInt(r)!=r?null:void fetch(O+"/skill/matrix",{method:"POST",body:new URLSearchParams("document_id=".concat(r))}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.documents[0];d(t),console.log(t),m(t.signatures.map((function(e){var t,n=e.employee;return{id:n.id,name:"".concat(n.first_name," ").concat(n.first_name),date:f(null===(t=e.e_date)||void 0===t?void 0:t.Time)}})))}))}),[]),!s)return null;console.log(b);var h=[Object(l.a)({},g("id")),{dataField:"name",text:"Full name",sort:!0},{dataField:"date",text:"Sign Date",sort:!0}],p="".concat(s.name,", ").concat(Q(null===(t=s.release_date)||void 0===t?void 0:t.Time));return Object(a.jsx)(K,{title:p,data:b,columns:h,defaultSorted:w("name"),wrapperClasses:"table-responsive",rowClasses:"text-nowrap"})},lt=function(){var e=Object(u.g)().pathname;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:"pt-5",children:"Error 404: Page not found"}),Object(a.jsxs)("h5",{className:"pt-3",children:["Not match for ",Object(a.jsx)("code",{children:e})]})]})},dt=function(){var e=E(),t=F(),n=function(t){var n=t.component,r=Object(d.a)(t,["component"]);return e?Object(a.jsx)(u.b,Object(l.a)(Object(l.a)({},r),{},{component:n})):Object(a.jsx)(u.a,{to:"/login"})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/",render:function(){return E()?Object(a.jsx)(u.a,{to:"/records-to-sign",component:he}):Object(a.jsx)(u.a,{to:"/login",component:Ee})}}),Object(a.jsx)(u.b,{path:"/login",component:Ee}),Object(a.jsx)(u.b,{path:"/logout",component:ke}),Object(a.jsx)(n,{path:"/records-to-sign",component:he}),Object(a.jsx)(n,{path:"/signed-records",component:Fe}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(n,{path:"/add-record",component:Ge}),Object(a.jsx)(n,{path:"/saved-record",component:We}),Object(a.jsx)(n,{path:"/settings",component:Ke}),Object(a.jsx)(n,{path:"/report",component:st})]}),Object(a.jsx)(u.b,{path:"*",component:lt})]})}),Object(a.jsx)("div",{className:"large-container",children:t&&Object(a.jsx)(n,{path:"/finder",component:it})})]})},ut=n(118),jt=n(212),bt=n(213),mt=n.p+"static/media/logo.923adaad.png",ft=function(){var e=E(),t=F(),n="sk"===JSON.parse(sessionStorage.getItem("language"))?Se.sk:Se.en;n=n.navigation;var r=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ut.a,{href:"/records-to-sign",children:n.recordsToSign}),Object(a.jsx)(ut.a,{href:"/signed-records",children:n.signedRecords}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ut.a,{href:"/add-record",children:n.addRecord}),Object(a.jsx)(ut.a,{href:"/saved-record",children:n.savedRecords}),Object(a.jsx)(ut.a,{href:"/finder",children:n.finder}),Object(a.jsx)(ut.a,{href:"/settings",children:n.settings})]}),Object(a.jsx)(ut.a,{href:"/logout",children:n.logout})]})},c=function(){return Object(a.jsx)(ut.a,{href:"/login",children:n.login})},o=function(){var t=e?"".concat(e.first_name," ").concat(e.last_name):"";return Object(a.jsx)("span",{style:{color:"white"},children:t})};return Object(a.jsxs)(jt.a,{expand:"md",bg:"dark",variant:"dark",sticky:"top",className:"navigation",children:[Object(a.jsx)(jt.a.Brand,{href:"/",children:Object(a.jsx)("img",{alt:"logo",src:mt,width:"50",height:"50",className:"d-inline-block align-top"})}),Object(a.jsx)(o,{}),Object(a.jsx)(jt.a.Toggle,{}),Object(a.jsx)(jt.a.Collapse,{id:"responsive-navbar-nav",children:Object(a.jsx)(bt.a,{className:"ml-auto",variant:"pills",activeKey:Object(u.g)().pathname,children:e?Object(a.jsx)(r,{}):Object(a.jsx)(c,{})})})]})},Ot=n(31),ht=n(32),pt=function(){function e(t){var n=t.timeout,a=t.onTimeout;Object(Ot.a)(this,e),this.timeout=n,this.onTimeout=a,this.eventHandler=this.updateExpiredTime.bind(this),this.tracker(),this.startInterval()}return Object(ht.a)(e,[{key:"startInterval",value:function(){var e=this;this.updateExpiredTime(),this.interval=setInterval((function(){parseInt(localStorage.getItem("_expiredTime"),10)<Date.now()&&e.onTimeout&&(e.onTimeout(),e.cleanUp())}),1e3)}},{key:"updateExpiredTime",value:function(){var e=this;this.timeoutTracker&&clearTimeout(this.timeoutTracker),this.timeoutTracker=setTimeout((function(){localStorage.setItem("_expiredTime",Date.now()+1e3*e.timeout)}),300)}},{key:"tracker",value:function(){window.addEventListener("mousemove",this.eventHandler),window.addEventListener("scroll",this.eventHandler),window.addEventListener("keydown",this.eventHandler)}},{key:"cleanUp",value:function(){localStorage.removeItem("_expiredTime"),clearInterval(this.interval),window.removeEventListener("mousemove",this.eventHandler),window.removeEventListener("scroll",this.eventHandler),window.removeEventListener("keydown",this.eventHandler)}}]),e}(),xt=Object(r.createContext)(void 0);var gt=function(){var e=Object(r.useState)({branches:[],divisions:[],cities:[],departments:[]}),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e={};h.forEach((function(t){J("/".concat(t)).then((function(n){return e[t]=n}))})),c(e)}),[]),Object(r.useEffect)((function(){var e=new pt({timeout:600,onTimeout:function(){E()&&(k(),V("/login"))}});return function(){return e.cleanUp()}}),[]),Object(a.jsxs)(s.a,{children:[Object(a.jsx)(ft,{}),Object(a.jsx)(xt.Provider,{value:n,children:Object(a.jsx)(dt,{})})]})};n(195),n(196);o.a.render(Object(a.jsx)(gt,{}),document.getElementById("root"))}},[[197,1,2]]]);
//# sourceMappingURL=main.9a64f8bc.chunk.js.map