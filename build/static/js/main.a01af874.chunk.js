(this.webpackJsonpgefco=this.webpackJsonpgefco||[]).push([[0],{122:function(e,t,n){},194:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(24),c=n.n(r),i=n(7),o=n(115),s=n(13),l=n(113),d=(n(122),n(6)),u=n(105),j=n(49),b=n(83),m=n(203),f=n(197),O=n(33),h=n(106),p=n(1),x=function(e){var t=e.notification;return t?Object(p.jsx)(h.a,{variant:t.variant,children:t.body}):null},g=function(e){var t=e.onSubmit,n=e.language,a=e.setLanguage,r=e.notification,c=Object(j.a)(),i=c.register,o=c.handleSubmit,s=function(e){return n===e&&"active"};return Object(p.jsx)(b.a,{className:"login-container",children:Object(p.jsxs)(m.a,{onSubmit:o(t),children:[Object(p.jsx)("h3",{align:"center",children:"Login"}),Object(p.jsxs)(f.a,{onClick:function(e){return a(e.target.id)},className:"container-fluid p-0 mt-3 mb-3 btn-group",children:[Object(p.jsx)(O.a,{id:"sk",className:s("sk"),children:"Slovak"}),Object(p.jsx)(O.a,{id:"cz",className:s("cz"),children:"Czech"}),Object(p.jsx)(O.a,{id:"en",className:s("en"),children:"English"}),Object(p.jsx)(O.a,{id:"hu",className:s("hu"),children:"Hungary"})]}),Object(p.jsxs)(m.a.Group,{children:[Object(p.jsx)(m.a.Label,{children:"Email"}),Object(p.jsx)(m.a.Control,{name:"email",placeholder:"Enter email",ref:i,required:!0})]}),Object(p.jsxs)(m.a.Group,{children:[Object(p.jsx)(m.a.Label,{children:"Password"}),Object(p.jsx)(m.a.Control,{name:"password",type:"password",placeholder:"Enter password",ref:i,required:!0})]}),r&&Object(p.jsx)(x,{notification:r}),Object(p.jsx)(O.a,{type:"submit",variant:"dark",className:"btn-block",children:"Login"})]})})},v=n(20),y=n(51),S=n.n(y),w=[{id:"1",name:"Janko",job:"Job1",complete:"70%"},{id:"2",name:"Julka",job:"Job2",complete:"100%"},{id:"3",name:"Jaroslav",job:"Job3",complete:"44%"},{id:"4",name:"Jozef",job:"Job4",complete:"53%"},{id:"5",name:"Juraj",job:"Job5",complete:"83%"},{id:"6",name:"Janka",job:"Job6",complete:"22%"}],k=[{id:1,name:"Document1",type:"A",deadline:new Date("2021/3/16"),employees:[{anet_id:"1",state:"_"},{anet_id:"2",state:"_"},{anet_id:"3",state:"_"},{anet_id:"4",state:"_"},{anet_id:"5",state:"_"},{anet_id:"6",state:"_"}]},{id:2,name:"Document2",type:"B",deadline:new Date("2021/1/16"),employees:[{anet_id:"1",state:"-"},{anet_id:"2",state:""},{anet_id:"3",state:""},{anet_id:"4",state:"s"},{anet_id:"5",state:"-"},{anet_id:"6",state:"es"}]},{id:3,name:"Document3",type:"B",deadline:new Date("2021/1/16"),employees:[{anet_id:"1",state:""},{anet_id:"2",state:"s"},{anet_id:"3",state:"es"},{anet_id:"4",state:"s"},{anet_id:"5",state:"es"},{anet_id:"6",state:""}]}],E=["city","branch","department","division"],T=["type0","type1","type2"],F=[{value:"type0",label:"type0"},{value:"type1",label:"type1"},{value:"type2",label:"type2"}],N=[{value:"documents",label:"documents"},{value:"document-training",label:"document-training"},{value:"online-training",label:"online-training"}],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{dataField:e,text:t,headerStyle:{width:"1%"}}},D=function(e){return Object.keys(e).includes("link")?"document":"training"},C=function(e){return!0===e.require_superior},z=function(e){return e.map((function(e){if(!C(e))return e.id}))},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return[{dataField:e,order:t}]},L=function(){return JSON.parse(sessionStorage.getItem("user"))},I=function(){return sessionStorage.removeItem("user")},A=function(){return null!==L()&&"admin"===L().role},B=function(e){return{variant:"success",body:e}},M=function(e){return{variant:"danger",body:e}},P=function(e){return 200<=e.status&&e.status<=299},J=function(e){return e?e.id:0},q=function(e){var t=[];return e.forEach((function(e){t.find((function(t){return t.value===e.value}))||t.push(e)})),t},H=function(e){return E.find((function(t){return e[t].length}))},G=function(e){return e.map((function(e){var t={};return E.forEach((function(n){t[n]={value:e["".concat(n,"_id")],label:e["".concat(n,"_name")]}})),t}))},U=function(e,t,n){return n.find((function(n){return"".concat(n[e].value)===t}))[e].label},V=function(e){return{Time:e+"T00:00:00Z",Valid:!0}},W=function(e){return e.Time.substr(0,10)},X=function(e){var t=e;return E.forEach((function(e){t=Z(e,t)})),Q(t).join("&")},Z=function(e,t){var n=[];return t.forEach((function(t){t[e].length?t[e].forEach((function(a){n.push(Object(i.a)(Object(i.a)({},t),{},Object(v.a)({},e,[a])))})):n.push(t)})),n},K=function(e){return e.length?e[0].value:"x"},Q=function(e){return e.map((function(e){return"".concat(K(e.branch),"; ").concat(K(e.city),"; ").concat(K(e.department),"; ").concat(K(e.division))}))},Y=function(){var e=Object(u.a)("language","sk"),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),i=Object(d.a)(c,2),o=i[0],l=i[1],j="",b=m();function m(){return setTimeout(f,40)}function f(){10===j.length&&x(j),j=""}clearTimeout(b);var O=function(e){var t=String.fromCharCode(e.keyCode).toLowerCase();(function(e){return function(e){return e.keyCode>=65&&e.keyCode<=90}(e)||function(e){return e.keyCode>=48&&e.keyCode<=57}(e)})(e)&&(j+=t,clearTimeout(b),b=m())};Object(a.useEffect)((function(){return document.addEventListener("keydown",O),function(){return document.removeEventListener("keydown",O)}}));var h=function(e){var t={id:e.id,role:e.role};sessionStorage.setItem("user",JSON.stringify(t)),window.location.reload(!1)},x=function(e){fetch("/auth/kiosk",{method:"POST",body:new URLSearchParams("card=".concat(e))}).then((function(e){return e.json()})).then((function(e){h(e)})).catch((function(){return l(M("Wrong card input"))}))};return null!==L()?Object(p.jsx)(s.a,{to:"/records-to-sign"}):Object(p.jsx)(g,{onSubmit:function(e){fetch("/auth/login",{method:"POST",body:new URLSearchParams("email=".concat(e.email,"&password=").concat(e.password))}).then((function(e){return e.json()})).then((function(e){h(e)})).catch((function(){return l(M("Wrong login input"))}))},language:n,setLanguage:r,notification:o})},$=n(116),ee=n(204),te=n(205),ne={sk:{loginPage:{header:"Prihlasovanie",email:"Email",password:"Heslo",submit:"Prihlasit sa",notification:{wrongLogin:"Zle prihlasovacie udaje",wrongCard:"Nepodarilo sa prihlasenie kartou"}},navigation:{login:"Prihlasit sa",recordsToSign:"Na podpisanie",signedRecords:"Podpisan\xe9",addRecord:"Prida\u0165",savedRecords:"Ulo\u017een\xe9",finder:"Vyh\u013ead\xe1vanie",settings:"Nastavenia",logout:"Odhl\xe1si\u0165 sa"}},en:{loginPage:{header:"Login",email:"Email",password:"Password",submit:"Login",notification:{wrongLogin:"Wrong login input",wrongCard:"Wrong card input"}},navigation:{login:"Login",recordsToSign:"Records to sign",signedRecords:"Signed records",addRecord:"Add record",savedRecords:"Saved records",finder:"Finder",settings:"Settings",logout:"Logout"}}},ae=function(){var e=L(),t=A(),n="sk"===JSON.parse(sessionStorage.getItem("language"))?ne.sk:ne.en;n=n.navigation;var a=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)($.a,{href:"/records-to-sign",children:n.recordsToSign}),Object(p.jsx)($.a,{href:"/signed-records",children:n.signedRecords}),t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)($.a,{href:"/add-record",children:n.addRecord}),Object(p.jsx)($.a,{href:"/saved-record",children:n.savedRecords}),Object(p.jsx)($.a,{href:"/finder",children:n.finder}),Object(p.jsx)($.a,{href:"/settings",children:n.settings})]}),Object(p.jsx)($.a,{href:"/logout",children:n.logout})]})},r=function(){return Object(p.jsx)($.a,{href:"/login",children:n.login})};return Object(p.jsxs)(ee.a,{expand:"md",bg:"dark",variant:"dark",className:"sticky-nav",id:"navigation",children:[Object(p.jsx)(ee.a.Brand,{href:"/",children:Object(p.jsx)("img",{alt:"logo",src:"/gefco_logo.png",width:"50",height:"50",className:"d-inline-block align-top"})}),Object(p.jsx)(ee.a.Toggle,{}),Object(p.jsx)(ee.a.Collapse,{id:"responsive-navbar-nav",children:Object(p.jsx)(te.a,{className:"ml-auto",variant:"pills",activeKey:Object(s.g)().pathname,children:null!==e?Object(p.jsx)(a,{}):Object(p.jsx)(r,{})})})]})},re=n(38),ce=n.n(re),ie=function(){return Object(p.jsx)("p",{children:"Table is empty"})},oe=function(e){var t=e.title,n=e.data,a=e.columns,r=e.order,c=e.expandRow,i=e.classes,o=function(){return t?Object(p.jsx)("h3",{style:{borderRadius:"0.25em",textAlign:"center",border:"2px solid gray",margin:"2% 0",padding:"0.5em",marginTop:"1.5%"},children:t}):null};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(o,{}),Object(p.jsx)(ce.a,{keyField:"id",hover:!0,classes:i,data:n,columns:a,noDataIndication:ie,defaultSorted:r,expandRow:c})]})},se=n(198),le=function(e,t){if(t.employee)return Object(p.jsxs)(p.Fragment,{children:[t.employee.first_name," ",t.employee.last_name]})},de=function(e){return e.substr(0,10).split("-").reverse().join(".")},ue=function(e,t){return Object(p.jsx)(p.Fragment,{children:de(t.date.Time)})},je=function(e,t){return Object(p.jsx)(p.Fragment,{children:de(t.deadline.Time)})},be=function(e,t){return Object(p.jsx)(p.Fragment,{children:de(t.release_date.Time)})},me=function(e,t){return Object(p.jsx)(p.Fragment,{children:de(t.s_date.Time)})},fe=function(e,t){return Object(p.jsx)(p.Fragment,{children:de(t.signatures[0].date.Time)})},Oe=function(e,t){var n=de(t.e_date.Time);return"01.01.0001"===n?Object(p.jsx)(p.Fragment,{children:"-"}):Object(p.jsx)(p.Fragment,{children:n})},he=function(e,t){return Object(p.jsx)("a",{href:t.name,target:"_blank",children:t.name})},pe=function(e,t){var n=function(){return Object(p.jsxs)("h5",{children:[Object(p.jsx)(se.a,{style:{color:"red",marginBottom:"6px"}})," ",he(0,t)]})},a=t.deadline<Date.now()&&t.employees.find((function(e){return e.state.includes("e")||e.state.includes("s")}));return Object(p.jsx)(p.Fragment,{children:a?Object(p.jsx)(n,{}):he(0,t)})},xe=function(e,t){var n=w[t-1];return Object(p.jsxs)("div",{style:{fontSize:"12px"},children:[n.name,", ",n.job,", ",100,"%"]})},ge=function(e,t,n,a){var r=a.setModalInfo,c=a.setShowModal,o=a.asSuperior;return Object(p.jsx)(O.a,{onClick:function(){console.log(t),C(t)||(c(!0),r(Object(i.a)(Object(i.a)({},t),{},{asSuperior:o})))},size:"sm",className:"btn-block",children:C(t)?"Details":"Sign"})},ve=function(e,t){return C(t)?Object(p.jsx)(O.a,{size:"sm",children:"Details"}):Oe(0,t.signatures[0])},ye=function(e,t,n,a){var r=a.setFormData;return Object(p.jsx)(O.a,{onClick:function(){return r(t)},size:"sm",id:"editBtn",children:"Edit"})},Se=function(e,t,n,a){var r=a.setSavedRec,c=a.setNotification,i=function(){console.log("okok"),r((function(e){return e.filter((function(e){return e.id!==t.id}))}))};return Object(p.jsx)(O.a,{id:"save",variant:"danger",size:"sm",onClick:function(){fetch("".concat(D(t),"/confirm/").concat(t.id),{method:"GET"}).then((function(e){P(e)?(i(),c(B("Record ".concat(t.name," was successfully sent")))):c(M("Sending the ".concat(t.name," failed")))})).catch((function(e){return console.log(e)}))},children:"Send"})},we=n(107),ke=function(){return Object(p.jsx)(we.a,{animation:"border",className:"m-5"})},Ee=function(e){var t=e.e;return Object(p.jsx)("h6",{className:"p-5",children:t})},Te=function(e){var t=Object(a.useState)(),n=Object(d.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(),o=Object(d.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(!1),j=Object(d.a)(u,2),b=j[0],m=j[1];return Object(a.useEffect)((function(){console.log("url",e),fetch(e,{method:"GET"}).then((function(e){return e.json()})).then((function(e){m(!0),c(e)}),(function(e){m(!0),l(e)}))}),[]),[r,b,s]},Fe=n(59),Ne=function(e){var t=e.showModal,n=e.setShowModal,a=e.modalInfo,r=e.handleAccept,c=function(){return n(!1)};return Object(p.jsxs)(Fe.a,{show:t,onHide:c,centered:!0,children:[Object(p.jsx)(Fe.a.Header,{closeButton:!0,children:Object(p.jsx)(Fe.a.Title,{children:"Confirm"})}),Object(p.jsx)(Fe.a.Body,{children:a.asSuperior?Object(p.jsx)("p",{children:"Do you really want do sign for ".concat("".concat(a.employee.first_name," ").concat(a.employee.last_name))}):Object(p.jsx)("p",{children:"Do you really want do sign the document named ".concat(a.name)})}),Object(p.jsxs)(Fe.a.Footer,{children:[Object(p.jsx)(O.a,{variant:"danger",onClick:function(){r(),c()},children:"Accept"}),Object(p.jsx)(O.a,{variant:"secondary",onClick:c,children:"Close"})]})]})},_e=function(){var e="/unsigned/signatures/".concat(L().id),t=Te(e),n=Object(d.a)(t,3),r=n[0],c=n[1],o=n[2],s=Object(a.useState)(!1),l=Object(d.a)(s,2),u=l[0],j=l[1],b=Object(a.useState)([]),m=Object(d.a)(b,2),f=m[0],O=m[1],h=Object(a.useState)([]),x=Object(d.a)(h,2),g=x[0],v=x[1],y=Object(a.useState)([]),S=Object(d.a)(y,2),w=S[0],k=S[1];if(Object(a.useEffect)((function(){r&&(k(r.documents),v(r.online_trainings))}),[r]),o)return Object(p.jsx)(Ee,{e:"Error: ".concat(o.message)});if(!c||!r)return Object(p.jsx)(ke,{});var E=function(e,t){return fetch(e,{method:"POST",body:new URLSearchParams("id=".concat(t))})},T=function(e){var t=D(f);E("/sign/".concat(t),e).then((function(n){P(n)&&("training"===t?N(e):C(e))}))},F=function(e){E("/sign/superior",e).then((function(t){P(t)&&I(e)}))},N=function(e){v(g.filter((function(t){return t.signatures[0].id!==e})))},C=function(e){k(w.filter((function(t){return t.signatures[0].id!==e})))},I=function(e){var t=w.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{signatures:t.signatures.filter((function(t){return t.id!==e}))})}));k(t.filter((function(e){return e.signatures.length})))},A=function(e,t){return[{dataField:"name",text:"Name",sort:!0},{dataField:"date.Time",text:"Date",sort:!0,formatter:ue},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:je},Object(i.a)(Object(i.a)({},_()),{},{formatter:ge,formatExtraData:{setModalInfo:e,setShowModal:t}})]}(O,j),B=function(e,t){return[{dataField:"name",text:"Name",sort:!0,formatter:he},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:be},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:je},Object(i.a)(Object(i.a)({},_()),{},{formatter:ge,formatExtraData:{setModalInfo:e,setShowModal:t,asSuperior:!1}})]}(O,j),M=function(e,t){return[{dataField:"employee.id",text:"Employee ID",sort:!0},{dataField:"employee.last_name",text:"Full name",sort:!0,formatter:le},{dataField:"e_date.Time",text:"Sign Date",sort:!0,formatter:Oe},Object(i.a)(Object(i.a)({},_()),{},{formatter:ge,formatExtraData:{setModalInfo:e,setShowModal:t,asSuperior:!0}})]}(O,j),J={onlyOneExpanding:!0,nonExpandable:z(w),renderer:function(e){return Object(p.jsx)(oe,{classes:"inner-table",data:e.signatures,columns:M,order:R("employee.last_name")})}};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(oe,{title:"Documents to sign",data:w,columns:B,order:R("deadline.Time"),expandRow:J}),Object(p.jsx)(oe,{title:"Trainings to sign",data:g,columns:A,order:R("deadline.Time")}),Object(p.jsx)(Ne,{showModal:u,setShowModal:j,modalInfo:f,handleAccept:function(){f.asSuperior?F(f.id):T(f.signatures[0].id),j(!1)}})]})},De=function(e){var t=e.documents;console.log("documents",t);var n=[{dataField:"name",text:"Name",sort:!0,formatter:he},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:be},{dataField:"signatures[0].e_date.Time",text:"Signed date",sort:!0,formatter:ve}],a=[{dataField:"employee.id",text:"Employee ID",sort:!0},{dataField:"employee.last_name",text:"Full name",sort:!0,formatter:le},{dataField:"e_date.Time",text:"Employee Sign",sort:!0,formatter:Oe},{dataField:"s_date.Time",text:"My Sign",sort:!0,formatter:me}],r={onlyOneExpanding:!0,nonExpandable:z(t),renderer:function(e){return Object(p.jsx)(oe,{classes:"inner-table",data:e.signatures,columns:a,order:R("employee.last_name")})}};return Object(p.jsx)(oe,{title:"Signed Documents",data:t,columns:n,expandRow:r,order:R("release_date.Time","desc")})},Ce=function(e){var t=e.trainings,n=[{dataField:"name",text:"Name",sort:!0},{dataField:"date.Time",text:"Took place",sort:!0,formatter:ue},{dataField:"signatures[0].date.Time",text:"Signed date",sort:!0,formatter:fe}];return Object(p.jsx)(oe,{title:"Signed Trainings",data:t,columns:n,order:R("date.Time","desc")})},ze=function(){var e="/signed/signatures/".concat(L().id),t=Te(e),n=Object(d.a)(t,3),a=n[0],r=n[1],c=n[2];return c?Object(p.jsx)(Ee,{e:"Error: ".concat(c.message)}):r&&a?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(De,{documents:a.documents}),Object(p.jsx)(Ce,{trainings:a.online_trainings})]}):Object(p.jsx)(ke,{})},Re=n(199),Le=n(66),Ie=function(e){var t=e.label,n=e.name,a=e.placeholder,r=e.type,c=e.register,i=e.as,o=e.required;return Object(p.jsxs)(m.a.Group,{as:Re.a,children:[Object(p.jsx)(m.a.Label,{column:!0,sm:"3",children:t}),Object(p.jsx)(Le.a,{children:Object(p.jsx)(m.a.Control,{name:n,placeholder:a,ref:c,type:r,as:i,required:o})})]})},Ae=n(200),Be=n(201),Me=n(202),Pe=n(17),Je=n(71),qe=function(e){var t=e.prefill,n=e.employees,r=e.combinations,c=e.combination,o=e.setCombination,s=e.notification,l=e.setNotification,u=r,j=Object(a.useState)(),b=Object(d.a)(j,2),m=b[0],f=b[1],O=Object(a.useState)([!1]),h=Object(d.a)(O,2),g=h[0],y=h[1],S=Object(a.useState)(q(u.map((function(e){return e.branch})))),w=Object(d.a)(S,2),k=w[0],E=w[1],T=Object(a.useState)(q(u.map((function(e){return e.division})))),F=Object(d.a)(T,2),N=F[0],_=F[1],D=Object(a.useState)(q(u.map((function(e){return e.department})))),C=Object(d.a)(D,2),z=C[0],R=C[1],L=Object(a.useState)(q(u.map((function(e){return e.city})))),I=Object(d.a)(L,2),A=I[0],B=I[1],M=function(e){f(e),y([!g[0]]),l(void 0)};Object(a.useEffect)((function(){H(c)||f("reset"),P()}),[g]);var P=function(){var e=u;function t(t){var n=c[t].map((function(e){return e.value}));if(n.length)e=e.filter((function(e){return n.includes(e[t].value)}));else for(var a in c);return n.length}var n=function(t){return q(e.map((function(e){return e[t]})))};function a(){E(n("branch"))}function r(){_(n("division"))}function i(){R(n("department"))}function o(){B(n("city"))}t("branch")||a(),t("division")||r(),t("department")||i(),t("city")||o(),"branch"!==m&&a(),"division"!==m&&r(),"department"!==m&&i(),"city"!==m&&o()},J=function(e,n,a){var r=t?t[e]:[];return Object(p.jsxs)(p.Fragment,{children:[n,Object(p.jsx)(Je.a,{defaultValue:r,isMulti:!0,name:e,options:a,placeholder:n,onChange:function(e,t){return function(e,t){var n=t.name;o(Object(i.a)(Object(i.a)({},c),{},Object(v.a)({},n,e))),"removedEmployees"!==n&&M(n)}(e,t)}}),Object(p.jsx)("br",{})]})};return Object(p.jsxs)(Le.a,{className:"p-0",children:[J("branch","Branches",k),J("division","Divisions",N),J("department","Departments",z),J("city","Cities",A),n&&J("removedEmployees","Remove employees",n),s&&Object(p.jsx)(x,{notification:s})]})},He=function(e){var t=e.prefill,n=e.combinations,r=e.setAssignedTo,c=e.setEmptyAssign,o=e.closeModal,s=Object(a.useState)(),l=Object(d.a)(s,2),u=l[0],j=l[1],m=Object(a.useState)(null),f=Object(d.a)(m,2),h=f[0],x=f[1],g=Object(a.useState)(t||{branch:[],division:[],department:[],city:[],removedEmployees:[]}),v=Object(d.a)(g,2),y=v[0],w=v[1],k=function(e){x(e.map((function(e){return{value:e.id,label:"".concat(e.first_name," ").concat(e.last_name)}})))},E=function(){return H(y)?(j(void 0),c([!1]),r((function(e){return[].concat(Object(Pe.a)(e),[Object(i.a)(Object(i.a)({},y),{},{id:S()()})])})),!0):(j(M("not valid combination")),!1)};return Object(p.jsx)(Fe.a,{show:!0,onHide:o,centered:!0,children:Object(p.jsxs)(b.a,{className:"pt-3 pb-3 pl-5 pr-5",children:[Object(p.jsx)(Fe.a.Header,{closeButton:!0,children:Object(p.jsx)(Fe.a.Title,{children:"Add new combination"})}),Object(p.jsx)(Fe.a.Body,{children:Object(p.jsx)(qe,{prefill:t,employees:h,combinations:n,combination:y,setCombination:w,notification:u,setNotification:j})}),Object(p.jsx)(Fe.a.Footer,{children:Object(p.jsxs)(Le.a,{className:"text-center",children:[Object(p.jsx)(O.a,{onClick:function(){if(H(y)){var e=X([y]);console.log(e),fetch("/employees/".concat(e),{mode:"no-cors",method:"GET"}).then((function(e){return e.json()})).then((function(e){return k(e)})).catch((function(e){return console.log("Errrrrrrrrrrror",e)}))}else j(M("Neboli najdeni ziadni zamestnanci"))},size:"sm",className:"mr-2",children:"Preview"}),t?Object(p.jsx)(O.a,{onClick:function(){return H(y)?(j(void 0),c([!1]),r((function(e){return e.map((function(e){return e.id===(null===t||void 0===t?void 0:t.id)?Object(i.a)(Object(i.a)({},y),{},{id:S()()}):e}))})),o(),!0):(j(M("not valid combination")),!1)},size:"sm",className:"mr-2",children:"Save"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(O.a,{onClick:E,size:"sm",className:"mr-2",children:"Add next"}),Object(p.jsx)(O.a,{onClick:function(){E()&&o()},size:"sm",className:"mr-2",children:"Add and close"})]}),Object(p.jsx)(O.a,{onClick:o,variant:"secondary",size:"sm",children:"close"})]})})]})})},Ge=function(e){var t=e.combinations,n=e.assignedTo,r=e.setAssignedTo,c=e.setEmptyAssign,o=Object(a.useState)(!1),s=Object(d.a)(o,2),l=s[0],u=s[1],j=Object(a.useState)(),b=Object(d.a)(j,2),m=b[0],f=b[1],h=function(){return u(!0)},x=function(e){f(e),h()},g=function(e){r((function(t){return t.filter((function(t){return t.id!==e.id}))}))},v=function(){return Object(p.jsxs)(O.a,{variant:"success",onClick:h,size:"sm",className:"mb-2",children:[Object(p.jsx)(Me.a,{size:"20",color:"white"}),Object(p.jsx)("span",{children:"add combination"})]})},y=function(e){return Object(p.jsx)(p.Fragment,{children:e.map((function(e){return e.label})).join(",")})},S=[{dataField:"branch",text:"Branch",formatter:function(e,t){return y(t.branch)}},{dataField:"division",text:"Division",formatter:function(e,t){return y(t.division)}},{dataField:"department",text:"Department",formatter:function(e,t){return y(t.department)}},{dataField:"city",text:"City",formatter:function(e,t){return y(t.city)}},Object(i.a)(Object(i.a)({},_("edit")),{},{formatter:function(e,t){return Object(p.jsx)(Ae.a,{size:"25",color:"black",onClick:function(){return x(t)}})}}),Object(i.a)(Object(i.a)({},_("del")),{},{formatter:function(e,t){return Object(p.jsx)(Be.a,{size:"25",color:"red",onClick:function(){return g(t)}})}})];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ce.a,{keyField:"id",data:n,columns:S,noDataIndication:ie,wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),Object(p.jsx)(v,{}),l&&Object(p.jsx)(He,{prefill:m,combinations:t,setAssignedTo:r,setEmptyAssign:c,closeModal:function(){f(void 0),u(!1)}})]})},Ue=function(e){var t,n=e.setRecords,r=e.formData,c=e.setFormData,o=e.actual,s=Object(j.a)({defaultValues:(t=r,t?Object(i.a)(Object(i.a)({},t),{},{release_date:W(t.release_date),deadline:W(t.deadline)}):{})}),l=s.register,u=s.handleSubmit,b=T,f=Object(a.useState)(),h=Object(d.a)(f,2),g=h[0],v=h[1],y=Object(a.useState)(r?r.type:""),w=Object(d.a)(y,2),k=w[0],F=w[1],N=Object(a.useState)(J(r)),_=Object(d.a)(N,2),D=_[0],C=_[1],z=Object(a.useState)(),R=Object(d.a)(z,2),L=R[0],I=R[1],A=Object(a.useState)([]),q=Object(d.a)(A,2),H=q[0],Z=q[1],K=Object(a.useState)([]),Q=Object(d.a)(K,2),Y=Q[0],$=Q[1],ee=Object(a.useState)([!0]),te=Object(d.a)(ee,2),ne=te[0],ae=te[1];Object(a.useEffect)((function(){return I(void 0)}),ne),Object(a.useEffect)((function(){fetch("/combinations",{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=G(e);Z(t);var n=function(e,t){return e?e.assigned_to.split("&").map((function(e){var n=e.split("; "),a={id:S()()};return E.forEach((function(e,r){a[e]=[{value:n[r],label:U(e,n[r],t)}]})),a})):[]}(r,t);$(n)})).catch((function(e){return console.log(e)}))}),[]);var re,ce=function(e,t){return fetch("/document/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(e){return P(e)?I(B("".concat(t," was successful"))):I(M("".concat(t," failed"))),e.json()})).catch((function(e){return console.log("error",e)}))},ie=function(e,t){return fetch("/document/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(a){return P(a)?(I(B("".concat(t," was successful"))),n&&oe(e),c&&c(void 0)):I(M("".concat(t," failed"))),a.json()})).catch((function(e){return console.log("error",e)}))},oe=function(e){n((function(t){return t.filter((function(t){return t.id!==e.id}))}))},se=function(e){n((function(t){var n=t;return n[t.findIndex((function(t){return t.id===e.id}))]=e,n}))};return Object(p.jsxs)(m.a,{onChange:function(){return I(void 0)},onSubmit:u((function(e){0===Y.length&&I(M("At least one combination is required")),e=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{release_date:V(e.release_date),deadline:V(e.deadline),assigned_to:X(t)})}(e,Y),console.log("data",e),"save"===g&&(D?(e=Object(i.a)(Object(i.a)({},e),{},{id:D}),ce(e,"update"),se(e)):ce(e,"create").then((function(e){return C(null===e||void 0===e?void 0:e.id)}))),"send"===g&&(D?(e=Object(i.a)(Object(i.a)({},e),{},{id:D}),o?ie(e,"create/confirm").then((function(e){return C(null===e||void 0===e?void 0:e.id)})):ie(e,"update/confirm")):ie(e,"create/confirm").then((function(e){return C(null===e||void 0===e?void 0:e.id)})))})),children:[Object(p.jsxs)(m.a.Group,{as:Re.a,children:[Object(p.jsx)(m.a.Label,{column:!0,sm:"3",children:"Type*"}),Object(p.jsx)(Le.a,{children:Object(p.jsx)(m.a.Control,{onChange:function(e){return F(e.target.value)},as:"select",name:"type",ref:l({validate:function(e){return""!==e}}),required:!0,value:k,children:(re=b,Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("option",{hidden:!0,value:"",children:"Select option ..."}),re.map((function(e){return Object(p.jsx)("option",{value:e,children:e},S()())}))]}))})})]}),Object(p.jsxs)(m.a.Group,{as:Re.a,children:[Object(p.jsx)(m.a.Label,{column:!0,sm:"3",children:" "}),Object(p.jsx)(Le.a,{children:Object(p.jsx)(m.a.Check,{inline:!0,label:"require superior",name:"require_superior",ref:l})})]}),Object(p.jsx)(Ie,{label:"Document name*",name:"name",placeholder:"Enter document name",register:l,required:!0}),Object(p.jsx)(Ie,{label:"Link to sharepoint",name:"link",placeholder:"Enter document link to sharepoint",register:l}),Object(p.jsx)(Ie,{label:"Release date*",name:"release_date",type:"date",register:l,required:!0}),Object(p.jsx)(Ie,{label:"Days to deadline*",name:"deadline",type:"date",register:l,required:!0}),Object(p.jsx)(Ie,{label:"Version*",name:"version",placeholder:"Enter version",register:l,required:!0}),Object(p.jsx)(Ie,{label:"Order number*",name:"order_number",type:"number",placeholder:"Enter number",register:l({valueAsNumber:!0}),required:!0}),Object(p.jsx)(Ie,{label:"Note",name:"note",as:"textarea",placeholder:"Enter note",register:l}),Object(p.jsx)(Ge,{combinations:H,assignedTo:Y,setAssignedTo:$,emptyAssign:ne,setEmptyAssign:ae}),L&&Object(p.jsx)(x,{notification:L}),Object(p.jsxs)("div",{className:"pt-1 btn-block text-right",children:[Object(p.jsx)(O.a,{type:"submit",className:"mr-1",onClick:function(){return v("save")},children:"Save"}),Object(p.jsx)(O.a,{type:"submit",variant:"danger",onClick:function(){return v("send")},children:o?"Send as new version":"Send"})]})]})},Ve=n(114),We=(n(192),function(e){var t,n=e.setRecords,r=e.formData,c=e.setFormData,o=e.actual,s=Object(j.a)({defaultValues:(t=r,t?Object(i.a)(Object(i.a)({},t),{},{date:W(t.date),deadline:W(t.deadline)}):{})}),l=s.register,u=s.handleSubmit,b=Object(a.useState)(),f=Object(d.a)(b,2),h=f[0],g=f[1],v=Object(a.useState)(J(r)),y=Object(d.a)(v,2),S=y[0],w=y[1],k=Object(a.useState)(),E=Object(d.a)(k,2),T=E[0],F=E[1],N=Object(a.useState)([]),_=Object(d.a)(N,2),D=_[0],C=_[1],z=Object(a.useState)([]),R=Object(d.a)(z,2),L=R[0],I=R[1],A=Object(a.useState)([!0]),q=Object(d.a)(A,2),H=q[0],G=q[1];Object(a.useEffect)((function(){return F(void 0)}),H),Object(a.useEffect)((function(){fetch("/employees/all",{method:"GET"}).then((function(e){return e.json()})).then((function(e){C(e),I(function(e,t){return e?e.unreleased_id_employees.split(",").map((function(e){return t.find((function(t){return t.id==e}))})):[]}(r,e))})).catch((function(e){return console.log(e)}))}),[]);var U=function(e,t){return fetch("/training/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(e){return P(e)?F(B("".concat(t," was successful"))):F(M("".concat(t," failed"))),e.json()})).catch((function(e){return console.log("error",e)}))},X=function(e,t){return fetch("/training/".concat(t),{method:"POST",body:JSON.stringify(e)}).then((function(a){return P(a)?(F(B("".concat(t," was successful"))),n&&Z(e),c&&c(void 0)):F(M("".concat(t," failed"))),a.json()})).catch((function(e){return console.log("error",e)}))},Z=function(e){n((function(t){return t.filter((function(t){return t.id!==e.id}))}))},K=function(e){n((function(t){var n=t;return n[t.findIndex((function(t){return t.id===e.id}))]=e,n}))};return Object(p.jsxs)(m.a,{onChange:function(){return F(void 0)},onSubmit:u((function(e){L.length?(e=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{date:V(e.date),deadline:V(e.deadline),unreleased_id_employees:t.map((function(e){return e.id})).join(",")})}(e,L),console.log(e),"save"===h&&(S?(e=Object(i.a)(Object(i.a)({},e),{},{id:S}),U(e,"update"),K(e)):U(e,"create").then((function(e){return w(null===e||void 0===e?void 0:e.id)}))),"send"===h&&(S?(e=Object(i.a)(Object(i.a)({},e),{},{id:S}),o?X(e,"create/confirm").then((function(e){return w(null===e||void 0===e?void 0:e.id)})):X(e,"update/confirm")):X(e,"create/confirm").then((function(e){return w(null===e||void 0===e?void 0:e.id)})))):F(M("At least one employee is required"))})),children:[Object(p.jsx)(Ie,{label:"Training name*",name:"name",placeholder:"Enter document name",register:l,required:!0}),Object(p.jsx)(Ie,{label:"Name of lector",name:"lector",placeholder:"Enter document link to sharepoint",register:l}),Object(p.jsx)(Ie,{label:"Name of agency",name:"agency",placeholder:"Enter agency",register:l}),Object(p.jsx)(Ie,{label:"Place",name:"place",placeholder:"Enter place",register:l}),Object(p.jsx)(Ie,{label:"Date*",name:"date",type:"date",placeholder:"Enter date",register:l,required:!0}),Object(p.jsx)(Ie,{label:"Days to deadline*",name:"deadline",type:"date",defaultValue:"14",register:l,required:!0}),Object(p.jsx)(Ie,{label:"Duration",name:"duration",type:"number",placeholder:"Enter duration",register:l({valueAsNumber:!0})}),Object(p.jsx)(Ie,{label:"Agenda*",name:"agenda",as:"textarea",placeholder:"Enter agenda",register:l,required:!0}),Object(p.jsxs)(m.a.Group,{as:Re.a,children:[Object(p.jsx)(m.a.Label,{column:!0,sm:"3",children:"Add employees*"}),Object(p.jsx)(Le.a,{children:Object(p.jsx)(Ve.a,{id:"basic-typeahead-single",name:"employees",labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name," [").concat(e.id,"]")},multiple:!0,onChange:function(e){I(e),G([!1])},options:D,placeholder:"Choose an employees...",selected:L})})]}),T&&Object(p.jsx)(x,{notification:T}),Object(p.jsxs)("div",{className:"pt-1 btn-block text-right",children:[Object(p.jsx)(O.a,{type:"submit",className:"mr-1",onClick:function(){return g("save")},children:"Save"}),Object(p.jsx)(O.a,{type:"submit",variant:"danger",onClick:function(){return g("send")},children:"Send"})]})]})}),Xe=function(){var e=Object(a.useState)("document"),t=Object(d.a)(e,2),n=t[0],r=t[1],c=function(e){return n===e&&"active"};return Object(p.jsxs)(b.a,{className:"w-75",children:[Object(p.jsxs)(f.a,{onClick:function(e){return r(e.target.id)},className:"btn-group btn-header",children:[Object(p.jsx)(O.a,{id:"document",className:c("document"),children:"Document"}),Object(p.jsx)(O.a,{id:"training",className:c("training"),children:"Online training"})]}),"document"===n&&Object(p.jsx)(Ue,{}),"training"===n&&Object(p.jsx)(We,{})]})},Ze=function(e){var t=e.showSM,n=e.setShowSM,r=e.cs,c=e.e,o=e.found,s=e.handleSearch,l=Object(a.useState)({branch:[],city:[],department:[],division:[]}),u=Object(d.a)(l,2),j=u[0],b=u[1],f=Object(a.useState)(),h=Object(d.a)(f,2),x=h[0],g=h[1],y=Object(a.useState)([!1]),S=Object(d.a)(y,2),w=S[0],k=S[1],E=Object(a.useState)(q(r.map((function(e){return e.branch})))),T=Object(d.a)(E,2),_=T[0],D=T[1],C=Object(a.useState)(q(r.map((function(e){return e.division})))),z=Object(d.a)(C,2),R=z[0],L=z[1],I=Object(a.useState)(q(r.map((function(e){return e.department})))),A=Object(d.a)(I,2),B=A[0],M=A[1],P=Object(a.useState)(q(r.map((function(e){return e.city})))),J=Object(d.a)(P,2),G=J[0],U=J[1],V=function(e){g(e),k([!w[0]])};Object(a.useEffect)((function(){H(j)||g("reset"),W()}),[w]);var W=function(){var e=r;function t(t){var n=j[t].map((function(e){return e.value}));return n.length&&(e=e.filter((function(e){return n.includes(e[t].value)}))),n.length}var n=function(t){return q(e.map((function(e){return e[t]})))};function a(){D(n("branch"))}function c(){L(n("division"))}function i(){M(n("department"))}function o(){U(n("city"))}t("branch")||a(),t("division")||c(),t("department")||i(),t("city")||o(),"branch"!==x&&a(),"division"!==x&&c(),"department"!==x&&i(),"city"!==x&&o()},X=function(e,t,n){return Object(p.jsx)(Le.a,{children:Object(p.jsx)(Je.a,{isMulti:!0,name:e,placeholder:t,options:n,onChange:function(e,t){return function(e,t){var n=t.name;b(Object(i.a)(Object(i.a)({},j),{},Object(v.a)({},n,e))),"removedEmployees"!==n&&V(n)}(e,t)}})})};return Object(p.jsxs)(m.a,{className:"pb-4",children:[Object(p.jsxs)(Re.a,{className:"pb-2",children:[X("type","Types",F),X("branch","Branches",_),X("division","Divisions",R),X("department","Departments",B),X("city","Cities",G),X("record","Record",N)]}),Object(p.jsxs)(Re.a,{children:[X("employeeName","Employee Name",c),X("superiorName","Superior Name",c),Object(p.jsxs)(Le.a,{className:"text-right",children:[Object(p.jsx)(O.a,{className:"mr-1",onClick:function(){console.log(j);var e={branch:j.branch.map((function(e){return e.value})).join(","),city:j.city.map((function(e){return e.value})).join(","),department:j.department.map((function(e){return e.value})).join(","),division:j.division.map((function(e){return e.value})).join(",")};s(e)},children:"Search"}),Object(p.jsx)(O.a,{className:"mr-1",disabled:!o.length,onClick:function(){return n(!t)},children:"Show ".concat(t?"table":"skillMatrix")}),Object(p.jsx)(O.a,{disabled:!o.length,children:"Export"})]})]})]})},Ke=function(e){var t=e.setRecords,n=e.formData,a=e.setFormData,r=e.actual,c=D(n),o={setRecords:t,formData:n,setFormData:a,actual:r};return Object(p.jsxs)(Fe.a,{show:!0,onHide:function(){return a(void 0)},centered:!0,size:"lg",children:[Object(p.jsx)(Fe.a.Header,{closeButton:!0,children:Object(p.jsxs)(Fe.a.Title,{children:["Edit ",c]})}),Object(p.jsx)(Fe.a.Body,{children:"document"===c?Object(p.jsx)(Ue,Object(i.a)({},o)):Object(p.jsx)(We,Object(i.a)({},o))})]})},Qe=function(e,t){return Object(p.jsx)(O.a,{onClick:function(){console.log("Show me the report")},size:"sm",children:"report"})},Ye=function(e){var t=e.found,n=e.setFound,r=e.cs,c=Object(a.useState)(),o=Object(d.a)(c,2),s=o[0],l=o[1];Object(a.useEffect)((function(){if(t.length&&r.length){var e=t.map((function(e){var t=e.assigned_to.split("; "),n=Object(d.a)(t,4),a=n[0],c=n[1],o=n[2],s=n[3],l=r.find((function(e){return e.city.value==c&&e.branch.value==a&&e.department.value==o&&e.division.value==s}));return l?Object(i.a)(Object(i.a)({},e),{},{branch:l.branch.label,department:l.department.label,division:l.division.label,city:l.city.label,record_type:"document"}):e}));console.log(t),n(e)}}),[]);var u=[{dataField:"name",text:"Name",sort:!0},{dataField:"release_date.Time",text:"Release",formatter:be,sort:!0},{dataField:"type",text:"Type",sort:!0},{dataField:"branch",text:"Branch",sort:!0},{dataField:"division",text:"Division",sort:!0},{dataField:"department",text:"Department",sort:!0},{dataField:"city",text:"City",sort:!0},{dataField:"record_type",text:"Record Type",sort:!0},{dataField:"complete",text:"State",sort:!0},Object(i.a)(Object(i.a)({},_("EditBtn")),{},{formatter:ye,formatExtraData:{setFormData:l}}),Object(i.a)(Object(i.a)({},_("ReportBtn")),{},{formatter:Qe})];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ce.a,{keyField:"id",hover:!0,data:t,columns:u,defaultSorted:R("name"),noDataIndication:ie,wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),s&&Object(p.jsx)(Ke,{setRecords:n,formData:s,setFormData:l,actual:!0})]})},$e=function(e,t,n,a){var r=a.data,c=a.setData,o=a.id,s=r[n],l=s.employees[o].anet_id,d=s.employees[o].state,u=d.includes("X");function j(){return console.log("un"),1===d.length&&"X"!==d?d:d.substr(1)}u&&(d=j());var b={backgroundColor:function(e){switch(e){case"-":return"gray";case"_":return"cornflowerblue";case"es":return"tomato";case"e":return"orange";case"s":return"gold";default:return"green"}}(d),color:function(e){return"s"===e?"black":"white"}(d),borderColor:u?"black":"white",borderWidth:"5px"};return Object(p.jsx)(O.a,{style:b,onClick:function(){var e=u?j():(console.log("mark"),"X"+d),t=Object(Pe.a)(s.employees);t[o]={anet_id:l,state:e},console.log(e);var a=Object(Pe.a)(r);a[n]=Object(i.a)(Object(i.a)({},s),{},{employees:t}),c(a)},className:"btn-block",children:[{state:"-",label:"no need"},{state:"es",label:"miss e+s"},{state:"e",label:"miss e"},{state:"s",label:"miss s"},{state:"",label:"well done"},{state:"X",label:"bug"},{state:"_",label:"not send"}].find((function(e){return e.state===d})).label})},et=n(206),tt=function(e){var t=e.setAction,n=e.setModalInfo,a=e.setShowModal,r=e.handleAccept,c=e.showLegend,i=e.setShowLegend,o=function(e){var c=e.target.id;t(c),"cancel"===c?r():(n({body:"Do you really want to ".concat(c," selected signatures?")}),a(!0))};return Object(p.jsxs)(Re.a,{className:"mb-3",children:[Object(p.jsx)(Le.a,{className:"text-left",children:Object(p.jsx)(f.a,{className:"div-btn",size:"sm",children:Object(p.jsx)(O.a,{onClick:function(){return i(!c)},children:c?"Hide legend":"Show legend"})})}),Object(p.jsx)(Le.a,{className:"text-right",children:Object(p.jsxs)(f.a,{className:"div-btn",onClick:o,size:"sm",children:[Object(p.jsx)(O.a,{id:"sign",size:"sm",children:"Sign"}),Object(p.jsx)(O.a,{id:"cancelDuty",size:"sm",children:"Cancel duty"}),Object(p.jsx)(O.a,{id:"trainAgain",size:"sm",children:"Train again"}),Object(p.jsx)(O.a,{id:"cancel",size:"sm",onClick:o,children:"Cancel"})]})})]})},nt=function(){var e=function(e){var t=e.color,n=e.textColor,a=void 0===n?"white":n,r=e.label,c=e.text,i={background:t,borderColor:t,color:a,width:"80px",height:"20px",fontSize:".7rem",fontWeight:"bold",padding:"0"};return Object(p.jsx)("p",{children:Object(p.jsxs)("span",{children:[Object(p.jsx)(O.a,{style:i,children:r})," ".concat(c)]})})};return Object(p.jsx)(et.a,{style:{width:"30rem",marginTop:"1rem",fontSize:".7rem",marginBottom:".75rem"},children:Object(p.jsxs)(et.a.Body,{children:[Object(p.jsx)(et.a.Subtitle,{className:"mb-3 text-muted",children:"Legend:"}),Object(p.jsxs)(et.a.Text,{children:[Object(p.jsx)(e,{label:"no need",text:"Zamestnanec bol odzna\u010den\xfd z potreby obozn\xe1menia",color:"gray"}),Object(p.jsx)(e,{label:"miss e+s",text:"Ani zamestnanec ani nadriaden\xfd e\u0161te nepotvrdili",color:"tomato"}),Object(p.jsx)(e,{label:"miss e",text:"Zamestnanec nepotvrdil",color:"orange"}),Object(p.jsx)(e,{label:"miss s",text:"Nadriaden\xfd nepotvrdil",color:"gold",textColor:"white"}),Object(p.jsx)(e,{label:"well done",text:"Dokument je potvrden\xfd",color:"green"}),Object(p.jsx)(e,{label:"not sent",text:"Este neodoslane",color:"cornflowerblue"}),Object(p.jsxs)("p",{children:[Object(p.jsx)(se.a,{style:{color:"red",marginBottom:"4px"}})," ","Uplynul deadline a ch\xfdbaj\xfa podpisy"]}),Object(p.jsxs)("p",{children:["hviezdi\u010dka ",Object(p.jsx)("strong",{children:"*"})," znamena, ze zamestnanec sa opakovane pre\u0161koluje"]})]})]})})},at=function(e){e.found;var t=Object(a.useState)(!1),n=Object(d.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(d.a)(o,2),l=s[0],u=s[1],j=Object(a.useState)({}),b=Object(d.a)(j,2),m=b[0],f=b[1],O=Object(a.useState)(""),h=Object(d.a)(O,2),x=h[0],g=h[1],v=Object(a.useState)(k),y=Object(d.a)(v,2),S=y[0],E=y[1],T=function(){var e=[{dataField:"name",text:"Document Name",formatter:pe}],t=0;return w.forEach((function(n){e.push(Object(i.a)(Object(i.a)({},_(n.id,n.name)),{},{formatter:$e,headerFormatter:xe,headerTitle:function(e,t){return w[t-1].job},formatExtraData:{data:S,setData:E,id:t++%w.length}}))})),e}();var F=function(){var e=S.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{employees:e.employees.map((function(e){return function(e,t){if(!function(e){return e.state.includes("X")}(t))return t;var n=t.state.replace("X","");return"sign"===x&&(n=function(e){return e.replace("s","")}(n)),"cancelDuty"===x&&(n="-"),"trainAgain"===x&&(n=function(e,t){return t.includes("s")?"es":"e"}(0,n)),Object(i.a)(Object(i.a)({},t),{},{state:n})}(0,e)}))})}));E(e)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ce.a,{keyField:"id",classes:"skill-matrix-table",data:S,columns:T,wrapperClasses:"table-responsive",rowClasses:"text-nowrap"}),Object(p.jsx)(tt,{setAction:g,setModalInfo:f,setShowModal:u,handleAccept:F,handleExport:function(){console.log("export is not implemented")},showLegend:r,setShowLegend:c}),r&&Object(p.jsx)(nt,{}),l&&Object(p.jsx)(Ne,{showModal:l,setShowModal:u,modalInfo:m,handleAccept:F})]})},rt=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),o=Object(d.a)(c,2),s=o[0],l=o[1];Object(a.useEffect)((function(){fetch("/combinations",{method:"GET"}).then((function(e){return e.json()})).then((function(e){var t=G(e);l(t)})).catch((function(e){return console.log(e)}))}),[]);var u=Object(a.useState)([]),j=Object(d.a)(u,2),b=j[0],m=j[1];Object(a.useEffect)((function(){fetch("/employees/all",{method:"GET"}).then((function(e){return e.json()})).then((function(e){m(e.map((function(e){return{value:e.id,label:"".concat(e.first_name," ").concat(e.last_name,", [").concat(e.id,"]")}})))})).catch((function(e){return console.log(e)}))}),[]);var f=Object(a.useState)([]),O=Object(d.a)(f,2),h=O[0],x=O[1];Object(a.useEffect)((function(){var e;(e="/document/actual",fetch(e,{mode:"no-cors",method:"GET"}).then((function(e){return e.json()}))).then((function(e){return x(e)}))}),[]);var g=function(e){if(console.log("a"),e.length&&s.length){console.log("b");var t=e.map((function(e){var t=e.assigned_to.split("; "),n=Object(d.a)(t,4),a=n[0],r=n[1],c=n[2],o=n[3],l=s.find((function(e){return e.city.value==r&&e.branch.value==a&&e.department.value==c&&e.division.value==o}));return l?Object(i.a)(Object(i.a)({},e),{},{branch:l.branch.label,department:l.department.label,division:l.division.label,city:l.city.label,record_type:"document"}):e}));console.log(e),x(t)}};return s.length?b.length?h.length?Object(p.jsxs)("div",{style:{marginTop:"1%"},className:"finder",children:[Object(p.jsx)(Ze,{showSM:n,setShowSM:r,cs:s,e:b,found:h,handleSearch:function(e){console.log(e),fetch("/document/filter",{method:"POST",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return g(e)}))}}),n?Object(p.jsx)(at,{found:h}):Object(p.jsx)(Ye,{found:h,setFound:x,cs:s})]}):Object(p.jsx)("h1",{children:"Loading.. records"}):Object(p.jsx)("h1",{children:"Loading.. employees"}):Object(p.jsx)("h1",{children:"Loading.. combinations"})},ct=function(e){e.submitError;var t=Object(a.useState)({}),n=Object(d.a)(t,2),r=(n[0],n[1]),c=Object(a.useState)(null),i=Object(d.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)({}),u=Object(d.a)(l,2),j=u[0],b=u[1],f=Object(a.useState)(""),x=Object(d.a)(f,2),g=x[0],v=x[1],y=Object(a.useState)(""),S=Object(d.a)(y,2),w=S[0],k=S[1],E=Object(a.useState)(null),T=Object(d.a)(E,2),F=T[0],N=T[1],_="OK";Object(a.useEffect)((function(){var e=sessionStorage.getItem("showDeleted");null===e?sessionStorage.setItem("showDeleted",!1):null===F?N(e):(document.getElementById("checkShowDeleted").checked=JSON.parse(F),sessionStorage.setItem("showDeleted",F))}),[F]),Object(a.useEffect)((function(){fetch("/divisions",{method:"get",mode:"no-cors"}).then((function(e){return e.json()})).then((function(e){D(e),r(e)}))}),[]);var D=function(e){for(var t=document.getElementById("selectDivision"),n=0;n<e.length;n++){var a=e[n].name,r=e[n].id,c=new Option(a,r);t.options.add(c)}},C=function(e){return Object(p.jsxs)(h.a,{variant:"danger",style:{color:"red"},children:[Object(p.jsx)(se.a,{size:"18",style:{margin:"5px",padding:"5px"}})," ",e]})},z=function(){return Object(p.jsxs)(h.a,{variant:"success",style:{color:"green"},children:[Object(p.jsx)(se.a,{size:"18",style:{margin:"5px",padding:"5px"}})," ","Successfully uploaded."]})},R=function(){k(""),v("")},L=function(e){return""!==e&&e!==_},I=function(e){return e===_};return Object(p.jsxs)("div",{children:[Object(p.jsx)("script",{crossOrigin:"true"}),Object(p.jsxs)(m.a,{className:"pl-3",children:[Object(p.jsx)(Re.a,{className:"pt-3",children:"Choose division"}),Object(p.jsx)(Re.a,{children:Object(p.jsx)("select",{defaultValue:"default",id:"selectDivision",children:function(){var e=[];return e.push(Object(p.jsx)("option",{disabled:!0,value:"default",children:"Select pobocka"},-1)),e}()})}),Object(p.jsx)(Re.a,{className:"pt-3",children:Object(p.jsx)("input",{type:"file",required:!0,onChange:function(e){return b(e.target.files[0])}})}),Object(p.jsx)(Re.a,{className:"pt-3",children:Object(p.jsx)(O.a,{type:"button",onClick:function(e){R();var t=new FormData,n="employees_upload_".concat(Date.now()),a=document.getElementById("selectDivision").value;if("default"!==a&&void 0!==j.name)t.append("file",j),t.append("name",n),t.append("division",a),fetch("http://localhost:7777/file/upload",{mode:"no-cors",method:"POST",body:t}).then((function(e){k(_),e.ok?alert("Perfect! "):401===e.status&&alert("Oops! ")}),(function(e){alert("Error submitting form!")}));else{k("default"===a?"Division is not set":"File is not set")}},children:"Upload"})}),L(w)&&C(w),I(w)&&z()]}),Object(p.jsxs)(m.a,{className:"pt-5",children:[Object(p.jsx)("p",{children:"Upload file with employee card information."}),Object(p.jsx)(m.a.Group,{children:Object(p.jsx)(m.a.File,{id:"cardsFile",label:"Select file.",onChange:function(e){return s(e.target.files[0])}})}),Object(p.jsx)(O.a,{type:"button",onClick:function(e){R();var t=new FormData,n="kiosk_upload_".concat(Date.now());if(t.append("file",o),t.append("name",n),console.log(o),null!=o)fetch("http://localhost:7777/file/upload",{mode:"no-cors",method:"POST",body:t}).then((function(e){v(_),e.ok?alert("Perfect! "):401===e.status&&alert("Oops! ")}),(function(e){alert("Error submitting form!")}));else{v("File not set")}},children:"Upload"}),L(g)&&C(g),I(g)&&z()]}),Object(p.jsxs)("div",{className:"form-check",children:[Object(p.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"checkShowDeleted",onClick:function(){N(!F)}}),Object(p.jsx)("label",{className:"form-check-label",htmlFor:"checkShowDeleted",children:"Show deleted employees."})]})]})},it=function(){return I(),Object(p.jsx)(s.a,{to:"/login"})},ot=n(111),st=n(112),lt=function(){function e(t){var n=t.timeout,a=t.onTimeout;Object(ot.a)(this,e),this.timeout=n,this.onTimeout=a,this.eventHandler=this.updateExpiredTime.bind(this),this.tracker(),this.startInterval()}return Object(st.a)(e,[{key:"startInterval",value:function(){var e=this;this.updateExpiredTime(),this.interval=setInterval((function(){parseInt(localStorage.getItem("_expiredTime"),10)<Date.now()&&e.onTimeout&&(e.onTimeout(),e.cleanUp())}),1e3)}},{key:"updateExpiredTime",value:function(){var e=this;this.timeoutTracker&&clearTimeout(this.timeoutTracker),this.timeoutTracker=setTimeout((function(){localStorage.setItem("_expiredTime",Date.now()+1e3*e.timeout)}),300)}},{key:"tracker",value:function(){window.addEventListener("mousemove",this.eventHandler),window.addEventListener("scroll",this.eventHandler),window.addEventListener("keydown",this.eventHandler)}},{key:"cleanUp",value:function(){localStorage.removeItem("_expiredTime"),clearInterval(this.interval),window.removeEventListener("mousemove",this.eventHandler),window.removeEventListener("scroll",this.eventHandler),window.removeEventListener("keydown",this.eventHandler)}}]),e}(),dt=function(){var e=Te("/document/edited"),t=Object(d.a)(e,3),n=t[0],r=t[1],c=t[2],o=Te("/training/edited"),s=Object(d.a)(o,3),l=s[0],u=s[1],j=s[2],b=Object(a.useState)([]),m=Object(d.a)(b,2),f=m[0],O=m[1],h=Object(a.useState)([]),g=Object(d.a)(h,2),v=g[0],y=g[1],S=Object(a.useState)(),w=Object(d.a)(S,2),k=w[0],E=w[1],T=Object(a.useState)(),F=Object(d.a)(T,2),N=F[0],C=F[1];if(Object(a.useEffect)((function(){n&&l&&(O(n),y(l))}),[n,l]),c)return Object(p.jsx)(Ee,{e:"Error: ".concat(c.message)});if(j)return Object(p.jsx)(Ee,{e:"Error: ".concat(j.message)});if(!r||!n||!u||!l)return Object(p.jsx)(ke,{});var z=function(e,t,n){return[{dataField:"name",text:"Name",sort:!0},{dataField:"date.Time",text:"Release",sort:!0,formatter:ue},{dataField:"place",text:"Place",sort:!0},Object(i.a)(Object(i.a)({},_("EditBtn")),{},{formatter:ye,formatExtraData:{setFormData:e}}),Object(i.a)(Object(i.a)({},_("SendBtn")),{},{formatter:Se,formatExtraData:{setNotification:n,setSavedRec:t}})]}(C,y,E),L=function(e,t,n){return[{dataField:"name",text:"Name",sort:!0},{dataField:"release_date.Time",text:"Release",sort:!0,formatter:be},{dataField:"deadline.Time",text:"Deadline",sort:!0,formatter:je},Object(i.a)(Object(i.a)({},_("EditBtn")),{},{formatter:ye,formatExtraData:{setFormData:e}}),Object(i.a)(Object(i.a)({},_("SendBtn")),{},{formatter:Se,formatExtraData:{setNotification:n,setSavedRec:t}})]}(C,O,E);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(oe,{title:"Saved trainings",data:f,columns:L,order:R("deadline.Time")}),Object(p.jsx)(oe,{title:"Saved documents",data:v,columns:z,order:R("deadline.Time")}),k&&Object(p.jsx)(x,{notification:k}),N&&Object(p.jsx)(Ke,{setRecords:"document"===D(N)?O:y,formData:N,setFormData:C})]})},ut=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{className:"pt-5",children:"Error 404 page not found"}),Object(p.jsxs)("h5",{className:"pt-3",children:["Not match for ",Object(p.jsx)("code",{children:Object(s.g)().pathname})]})]})};var jt=function(){var e=L(),t=A();Object(a.useEffect)((function(){var t=new lt({timeout:600,onTimeout:function(){null!==e&&(I(),window.location.reload(!1))}});return function(){t.cleanUp()}}),[]);var n=function(t){var n=t.component,a=Object(o.a)(t,["component"]);return null===e?Object(p.jsx)(s.a,{to:"/login"}):Object(p.jsx)(s.b,Object(i.a)(Object(i.a)({},a),{},{render:function(e){return Object(p.jsx)(n,Object(i.a)({},e))}}))};return Object(p.jsxs)(l.a,{children:[Object(p.jsx)(ae,{}),Object(p.jsx)(b.a,{children:Object(p.jsxs)(s.d,{children:[Object(p.jsx)(s.b,{exact:!0,path:"/",render:function(){return null!==L()?Object(p.jsx)(s.a,{to:"/records-to-sign",component:_e}):Object(p.jsx)(s.a,{to:"/login",component:Y})}}),Object(p.jsx)(s.b,{path:"/login",component:Y}),Object(p.jsx)(s.b,{path:"/logout",component:it}),Object(p.jsx)(n,{path:"/records-to-sign",component:_e}),Object(p.jsx)(n,{path:"/signed-records",component:ze}),t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(n,{path:"/add-record",component:Xe}),Object(p.jsx)(n,{path:"/saved-record",component:dt}),Object(p.jsx)(n,{path:"/settings",component:ct})]}),Object(p.jsx)(s.b,{path:"*",component:ut})]})}),Object(p.jsx)("div",{className:"large-container",children:t&&Object(p.jsx)(n,{path:"/finder",component:rt})})]})};n(193);c.a.render(Object(p.jsx)(jt,{}),document.getElementById("root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.a01af874.chunk.js.map